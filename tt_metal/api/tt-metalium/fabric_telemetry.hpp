// SPDX-FileCopyrightText: Â© 2025 Tenstorrent AI ULC.
//
// SPDX-License-Identifier: Apache-2.0

// DO NOT EDIT THIS FILE!  It is generated from tt_metal/hw/inc/fabric_telemetry_msgs.h
// by tt_metal/llrt/hal/codegen/codegen.sh.
// This file provides arch- and core- independent accessors.
// You should use HAL to create a Factory object with programmable core
// as the argument (arch as implicit argument, handled by HAL), and then
// use the Factory to create views and/or memory-owning objects for
// different structs.
#pragma once

#include <cstddef>
#include <cstdint>
#include <array>
// #include "llrt/struct_view_driver.hpp"
namespace tt::tt_fabric::fabric_telemetry {
namespace types {
enum RouterState : uint8_t { STANDBY = 0, ACTIVE = 1, PAUSED = 2, DRAINING = 3 };
enum class FabricArch : uint8_t { WORMHOLE_B0 = 0, BLACKHOLE = 1, QUASAR = 2, STATIC_ONLY = 3 };
enum DynamicStatistics : uint8_t {
    NONE = 0x00,
    ROUTER_STATE = 0x01,
    BANDWIDTH = 0x02,
    HEARTBEAT_TX = 0x04,
    HEARTBEAT_RX = 0x08,
    STAT_COUNT = 4
};
struct RiscTimestampV2 : ::tt::tt_metal::hal_structs::StructBuffer<RiscTimestampV2> {
    enum class Field { full, lo, hi };
    static constexpr size_t fields_count = 3;
    template <bool Const, Field F>
    struct FieldTraits;
    template <bool Const>
    struct BasicView : public ::tt::tt_metal::hal_structs::BaseStructView<Const, RiscTimestampV2> {
        using ::tt::tt_metal::hal_structs::BaseStructView<Const, RiscTimestampV2>::BaseStructView;
        decltype(auto) full() const { return this->template get<RiscTimestampV2::Field::full>(); }
        decltype(auto) lo() const { return this->template get<RiscTimestampV2::Field::lo>(); }
        decltype(auto) hi() const { return this->template get<RiscTimestampV2::Field::hi>(); }
    };
    using View = BasicView<false>;
    using ConstView = BasicView<true>;
};

struct BandwidthTelemetry : ::tt::tt_metal::hal_structs::StructBuffer<BandwidthTelemetry> {
    enum class Field { elapsed_active_cycles, elapsed_cycles, num_words_sent, num_packets_sent };
    static constexpr size_t fields_count = 4;
    template <bool Const, Field F>
    struct FieldTraits;
    template <bool Const>
    struct BasicView : public ::tt::tt_metal::hal_structs::BaseStructView<Const, BandwidthTelemetry> {
        using ::tt::tt_metal::hal_structs::BaseStructView<Const, BandwidthTelemetry>::BaseStructView;
        decltype(auto) elapsed_active_cycles() const {
            return this->template get<BandwidthTelemetry::Field::elapsed_active_cycles>();
        }
        decltype(auto) elapsed_cycles() const {
            return this->template get<BandwidthTelemetry::Field::elapsed_cycles>();
        }
        decltype(auto) num_words_sent() const {
            return this->template get<BandwidthTelemetry::Field::num_words_sent>();
        }
        decltype(auto) num_packets_sent() const {
            return this->template get<BandwidthTelemetry::Field::num_packets_sent>();
        }
    };
    using View = BasicView<false>;
    using ConstView = BasicView<true>;
};

struct EriscDynamicEntry : ::tt::tt_metal::hal_structs::StructBuffer<EriscDynamicEntry> {
    enum class Field { router_state, tx_heartbeat, rx_heartbeat };
    static constexpr size_t fields_count = 3;
    template <bool Const, Field F>
    struct FieldTraits;
    template <bool Const>
    struct BasicView : public ::tt::tt_metal::hal_structs::BaseStructView<Const, EriscDynamicEntry> {
        using ::tt::tt_metal::hal_structs::BaseStructView<Const, EriscDynamicEntry>::BaseStructView;
        decltype(auto) router_state() const { return this->template get<EriscDynamicEntry::Field::router_state>(); }
        decltype(auto) tx_heartbeat() const { return this->template get<EriscDynamicEntry::Field::tx_heartbeat>(); }
        decltype(auto) rx_heartbeat() const { return this->template get<EriscDynamicEntry::Field::rx_heartbeat>(); }
    };
    using View = BasicView<false>;
    using ConstView = BasicView<true>;
};

struct DynamicInfo : ::tt::tt_metal::hal_structs::StructBuffer<DynamicInfo> {
    enum class Field { tx_bandwidth, rx_bandwidth, erisc };
    static constexpr size_t fields_count = 3;
    template <bool Const, Field F>
    struct FieldTraits;
    template <bool Const>
    struct BasicView : public ::tt::tt_metal::hal_structs::BaseStructView<Const, DynamicInfo> {
        using ::tt::tt_metal::hal_structs::BaseStructView<Const, DynamicInfo>::BaseStructView;
        decltype(auto) tx_bandwidth() const { return this->template get<DynamicInfo::Field::tx_bandwidth>(); }
        decltype(auto) rx_bandwidth() const { return this->template get<DynamicInfo::Field::rx_bandwidth>(); }
        decltype(auto) erisc() const { return this->template get<DynamicInfo::Field::erisc>(); }
    };
    using View = BasicView<false>;
    using ConstView = BasicView<true>;
};

struct StaticInfo : ::tt::tt_metal::hal_structs::StructBuffer<StaticInfo> {
    enum class Field { mesh_id, device_id, direction, fabric_config, supported_stats };
    static constexpr size_t fields_count = 5;
    template <bool Const, Field F>
    struct FieldTraits;
    template <bool Const>
    struct BasicView : public ::tt::tt_metal::hal_structs::BaseStructView<Const, StaticInfo> {
        using ::tt::tt_metal::hal_structs::BaseStructView<Const, StaticInfo>::BaseStructView;
        decltype(auto) mesh_id() const { return this->template get<StaticInfo::Field::mesh_id>(); }
        decltype(auto) device_id() const { return this->template get<StaticInfo::Field::device_id>(); }
        decltype(auto) direction() const { return this->template get<StaticInfo::Field::direction>(); }
        decltype(auto) fabric_config() const { return this->template get<StaticInfo::Field::fabric_config>(); }
        decltype(auto) supported_stats() const { return this->template get<StaticInfo::Field::supported_stats>(); }
    };
    using View = BasicView<false>;
    using ConstView = BasicView<true>;
};

struct FabricTelemetryStaticOnly : ::tt::tt_metal::hal_structs::StructBuffer<FabricTelemetryStaticOnly> {
    enum class Field { static_info };
    static constexpr size_t fields_count = 1;
    template <bool Const, Field F>
    struct FieldTraits;
    template <bool Const>
    struct BasicView : public ::tt::tt_metal::hal_structs::BaseStructView<Const, FabricTelemetryStaticOnly> {
        using ::tt::tt_metal::hal_structs::BaseStructView<Const, FabricTelemetryStaticOnly>::BaseStructView;
        decltype(auto) static_info() const {
            return this->template get<FabricTelemetryStaticOnly::Field::static_info>();
        }
    };
    using View = BasicView<false>;
    using ConstView = BasicView<true>;
};

struct FabricTelemetry : ::tt::tt_metal::hal_structs::StructBuffer<FabricTelemetry> {
    enum class Field { static_info, dynamic_info };
    static constexpr size_t fields_count = 2;
    template <bool Const, Field F>
    struct FieldTraits;
    template <bool Const>
    struct BasicView : public ::tt::tt_metal::hal_structs::BaseStructView<Const, FabricTelemetry> {
        using ::tt::tt_metal::hal_structs::BaseStructView<Const, FabricTelemetry>::BaseStructView;
        decltype(auto) static_info() const { return this->template get<FabricTelemetry::Field::static_info>(); }
        decltype(auto) dynamic_info() const { return this->template get<FabricTelemetry::Field::dynamic_info>(); }
    };
    using View = BasicView<false>;
    using ConstView = BasicView<true>;
};

// Magic numbers are generated by code generator.
// They will match the positions in the offsets array in the
// (also generated) implementation file.
template <bool Const>
struct RiscTimestampV2::FieldTraits<Const, RiscTimestampV2::Field::full>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, RiscTimestampV2>::template ScalarField<uint64_t, 0> {};
template <bool Const>
struct RiscTimestampV2::FieldTraits<Const, RiscTimestampV2::Field::lo>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, RiscTimestampV2>::template ScalarField<uint32_t, 1> {};
template <bool Const>
struct RiscTimestampV2::FieldTraits<Const, RiscTimestampV2::Field::hi>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, RiscTimestampV2>::template ScalarField<uint32_t, 2> {};
template <bool Const>
struct BandwidthTelemetry::FieldTraits<Const, BandwidthTelemetry::Field::elapsed_active_cycles>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, BandwidthTelemetry>::
          template StructField<RiscTimestampV2, 0, 4> {};
template <bool Const>
struct BandwidthTelemetry::FieldTraits<Const, BandwidthTelemetry::Field::elapsed_cycles>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, BandwidthTelemetry>::
          template StructField<RiscTimestampV2, 1, 4> {};
template <bool Const>
struct BandwidthTelemetry::FieldTraits<Const, BandwidthTelemetry::Field::num_words_sent>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, BandwidthTelemetry>::template ScalarField<uint64_t, 2> {};
template <bool Const>
struct BandwidthTelemetry::FieldTraits<Const, BandwidthTelemetry::Field::num_packets_sent>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, BandwidthTelemetry>::template ScalarField<uint64_t, 3> {};
template <bool Const>
struct EriscDynamicEntry::FieldTraits<Const, EriscDynamicEntry::Field::router_state>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, EriscDynamicEntry>::template ScalarField<RouterState, 0> {};
template <bool Const>
struct EriscDynamicEntry::FieldTraits<Const, EriscDynamicEntry::Field::tx_heartbeat>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, EriscDynamicEntry>::
          template StructField<RiscTimestampV2, 1, 3> {};
template <bool Const>
struct EriscDynamicEntry::FieldTraits<Const, EriscDynamicEntry::Field::rx_heartbeat>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, EriscDynamicEntry>::
          template StructField<RiscTimestampV2, 2, 3> {};
template <bool Const>
struct DynamicInfo::FieldTraits<Const, DynamicInfo::Field::tx_bandwidth>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, DynamicInfo>::template StructField<BandwidthTelemetry, 0, 4> {
};
template <bool Const>
struct DynamicInfo::FieldTraits<Const, DynamicInfo::Field::rx_bandwidth>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, DynamicInfo>::template StructField<BandwidthTelemetry, 1, 4> {
};
template <bool Const>
struct DynamicInfo::FieldTraits<Const, DynamicInfo::Field::erisc>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, DynamicInfo>::
          template StructArray<EriscDynamicEntry, 2, 5, 3> {};
template <bool Const>
struct StaticInfo::FieldTraits<Const, StaticInfo::Field::mesh_id>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, StaticInfo>::template ScalarField<uint16_t, 0> {};
template <bool Const>
struct StaticInfo::FieldTraits<Const, StaticInfo::Field::device_id>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, StaticInfo>::template ScalarField<uint8_t, 1> {};
template <bool Const>
struct StaticInfo::FieldTraits<Const, StaticInfo::Field::direction>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, StaticInfo>::template ScalarField<uint8_t, 2> {};
template <bool Const>
struct StaticInfo::FieldTraits<Const, StaticInfo::Field::fabric_config>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, StaticInfo>::template ScalarField<uint32_t, 3> {};
template <bool Const>
struct StaticInfo::FieldTraits<Const, StaticInfo::Field::supported_stats>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, StaticInfo>::template ScalarField<DynamicStatistics, 4> {};
template <bool Const>
struct FabricTelemetryStaticOnly::FieldTraits<Const, FabricTelemetryStaticOnly::Field::static_info>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, FabricTelemetryStaticOnly>::
          template StructField<StaticInfo, 0, 1> {};
template <bool Const>
struct FabricTelemetry::FieldTraits<Const, FabricTelemetry::Field::static_info>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, FabricTelemetry>::template StructField<StaticInfo, 0, 2> {};
template <bool Const>
struct FabricTelemetry::FieldTraits<Const, FabricTelemetry::Field::dynamic_info>
    : ::tt::tt_metal::hal_structs::BaseStructView<Const, FabricTelemetry>::template StructField<DynamicInfo, 1, 3> {};
}  // namespace types

class Factory {
public:
    using Impl = std::array<::tt::tt_metal::hal_structs::StructInfo, 7>;

private:
    template <typename Struct>
    struct StructTraits;
    template <typename Struct>
    const auto& info() const {
        return (*impl_)[StructTraits<Struct>::index];
    }

public:
    Factory(const Impl& impl) : impl_(&impl) {}
    // Create a memory-owning object
    template <typename Struct>
    Struct create() const {
        return {info<Struct>()};
    };
    // Create a view from arbitrary buffers - caller must guarantee the buffer has appropriate size
    template <typename Struct>
    Struct::View create_view(std::byte* base) const {
        return {info<Struct>(), base};
    }
    // Create a const view from arbitrary buffers - caller must guarantee the buffer has appropriate size
    template <typename Struct>
    Struct::ConstView create_view(const std::byte* base) const {
        return {info<Struct>(), base};
    }
    // Query the size of a struct
    template <typename Struct>
    size_t size_of() const {
        return info<Struct>().get_size();
    }
    // Query the offset of a struct field
    template <typename Struct>
    size_t offset_of(Struct::Field f) const {
        return info<Struct>().offset_of(static_cast<size_t>(f));
    }

private:
    const Impl* impl_;
};
template <>
struct Factory::StructTraits<types::RiscTimestampV2> {
    static constexpr size_t index = 0;
};
template <>
struct Factory::StructTraits<types::BandwidthTelemetry> {
    static constexpr size_t index = 1;
};
template <>
struct Factory::StructTraits<types::EriscDynamicEntry> {
    static constexpr size_t index = 2;
};
template <>
struct Factory::StructTraits<types::DynamicInfo> {
    static constexpr size_t index = 3;
};
template <>
struct Factory::StructTraits<types::StaticInfo> {
    static constexpr size_t index = 4;
};
template <>
struct Factory::StructTraits<types::FabricTelemetryStaticOnly> {
    static constexpr size_t index = 5;
};
template <>
struct Factory::StructTraits<types::FabricTelemetry> {
    static constexpr size_t index = 6;
};
using namespace types;

}  // namespace tt::tt_fabric::fabric_telemetry
