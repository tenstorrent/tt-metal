# Centralized Python version configuration for TT-Metalium Docker builds
#
# This file defines the Python version used across all Dockerfiles to ensure consistency.
# Default is Python 3.10, but Ubuntu 24.04 and Fedora 43 use Python 3.12.
#
# Usage in Dockerfile:
#   COPY dockerfile/python-version.conf /tmp/
#   RUN . /tmp/python-version.conf && uv python install $PYTHON_VERSION
#
# Usage in shell scripts:
#   source dockerfile/python-version.conf
#   uv python install $PYTHON_VERSION
#
# The script automatically detects:
#   - UBUNTU_VERSION environment variable (set from ARG in Dockerfile)
#   - FEDORA_VERSION environment variable (set from ARG in Dockerfile)
#   - OS version from /etc/os-release as fallback

# Default Python version
PYTHON_VERSION="3.10"

# Override to Python 3.12 for Ubuntu 24.04 and Fedora 43
if [ -n "$UBUNTU_VERSION" ] && [ "$UBUNTU_VERSION" = "24.04" ]; then
    PYTHON_VERSION="3.12"
elif [ -n "$FEDORA_VERSION" ] && [ "$FEDORA_VERSION" = "43" ]; then
    PYTHON_VERSION="3.12"
elif [ -f /etc/os-release ]; then
    # Fallback: detect from /etc/os-release
    . /etc/os-release
    if [ "$ID" = "ubuntu" ] && [ "$VERSION_ID" = "24.04" ]; then
        PYTHON_VERSION="3.12"
    elif [ "$ID" = "fedora" ] && [ "$VERSION_ID" = "43" ]; then
        PYTHON_VERSION="3.12"
    fi
fi

# Python version for release images (same logic as above)
PYTHON_VERSION_RELEASE="$PYTHON_VERSION"
