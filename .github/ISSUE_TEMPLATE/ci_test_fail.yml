name: "CI Pipeline Failure Report"
description: "Report a failing test in a CI pipeline"
title: "[CI Failure] {{ pipeline_name }} - {{ test_name }}"
labels: ["ci-failure", "triage"]
body:
  - type: input
    id: pipeline_name
    attributes:
      label: "Pipeline Name"
      description: "Name of the failing pipeline (e.g., test, build, lint)"
      placeholder: "e.g., metal-nightly-tests"
    validations:
      required: true

  - type: input
    id: test_name
    attributes:
      label: "Test Name"
      description: "Name of the failing test"
      placeholder: "e.g., test_galaxy_link_reliability"
    validations:
      required: true

  - type: input
    id: test_path
    attributes:
      label: "Path to Test in Repo"
      description: "Relative file path in the repo where the test is defined"
      placeholder: "e.g., tests/galaxy/test_link.py"
    validations:
      required: true

  - type: dropdown
    id: is_nd
    attributes:
      label: "Is this a Non-Deterministic (ND) Failure?"
      options:
        - "Yes"
        - "No"
    validations:
      required: true

  - type: dropdown
    id: hang
    attributes:
      label: "Did the Test Hang?"
      options:
        - "Yes"
        - "No"
    validations:
      required: true

  - type: dropdown
    id: timeout
    attributes:
      label: "Did the Test Timeout?"
      options:
        - "Yes"
        - "No"
    validations:
      required: true

  - type: textarea
    id: failure_snippet
    attributes:
      label: "Failure Signature Snippet"
      description: "Paste the relevant portion of the error or log output"
      render: shell
      placeholder: |
        Traceback (most recent call last):
          File "...", line ..., in ...
            assert ...
        AssertionError: ...
    validations:
      required: true

  - type: input
    id: pipeline_link
    attributes:
      label: "Link to Failing Pipeline or ND Custom Dispatch Run"
      description: "Paste the link to the CI run showing the failure"
      placeholder: "https://github.com/org/repo/actions/runs/123456789"
    validations:
      required: true
