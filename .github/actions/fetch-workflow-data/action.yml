name: 'Fetch Workflow Data'
description: 'Fetches workflow run data and caches it for analysis'

inputs:
  workflow_configs:
    description: 'JSON array of workflow configurations to filter by'
    required: true
  branch:
    description: 'Branch to filter runs by (default: main)'
    required: false
    default: 'main'
  actor:
    description: 'Actor to filter runs by'
    required: false
  days:
    description: 'Number of days of data to fetch (default: 7)'
    required: false
  cache-path:
    description: 'Path to save the cached workflow data'
    required: true
  GITHUB_TOKEN:
    description: 'GitHub token for API access'
    required: true
  force-cache:
    description: 'If true, skips loading cache and fetches all new data'
    required: false
    default: 'true'

outputs:
  total-runs:
    description: 'Total number of runs fetched'
  workflow-count:
    description: 'Number of unique workflows found'
  cache-path:
    description: 'Path to the cached workflow data'

runs:
  using: 'node20'
  main: 'fetch-workflow-data.js'
