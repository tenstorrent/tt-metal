name: 'Analyze Workflow Data'
description: 'Analyzes cached workflow run data and generates a report'

inputs:
  cache-path:
    description: 'Path to the cached workflow data file'
    required: true
  GITHUB_TOKEN:
    description: 'GitHub token for API access. Used to fetch PR information and workflow details.'
    required: true
  days:
    description: 'Number of days to look back for workflow data'
    required: false
    default: '15'
  workflow_configs:
    description: 'JSON array of workflow configurations for sorting'
    required: true

outputs:
  failed_workflows:
    description: 'JSON array of workflow names that have failed their latest run on the main branch'
  report:
    description: 'The generated workflow report in markdown format, containing workflow statistics and failure details'

runs:
  using: 'node20'
  main: 'analyze-workflow-data.js'
