# TTSim Skip List
# Tests that are not compatible with TTSim simulator
#
# Format: One test path per line
#   - Can skip entire files: tests/path/to/test_file.py
#   - Can skip specific tests: tests/path/to/test_file.py::test_function_name
#   - Empty lines and lines starting with # are ignored
#
# This list will be refined through iteration and testing.
# When a test fails with TTSim, add it here with a comment explaining why.

# =============================================================================
# INITIAL SKIP LIST
# These are tests that will likely need to be skipped based on TTSim limitations
# =============================================================================

# CCL (Collective Communication Library) tests - many require multi-chip support
# TTSim may not fully support mesh/galaxy configurations
tests/ttnn/unit_tests/operations/ccl/

# Multi-chip/cluster tests (T3000, TG, Galaxy)
tests/nightly/tg/
tests/nightly/t3000/

# Point-to-point tests that may require multi-chip
tests/ttnn/unit_tests/operations/point_to_point/

# Comparison mode tests - TTSim doesn't support comparison mode
# Error: UnimplementedFunctionality: tensix_execute_sfploadmacro
tests/ttnn/unit_tests/base_functionality/test_comparison_mode.py

# Expand tests with TILE layout - TTSim unpacker issue
# Error: UndefinedBehavior: tensix_execute_unpacr
tests/ttnn/unit_tests/base_functionality/test_expand.py

# Multi-device tests - TTSim unpacker data format mismatch
# Error: UndefinedBehavior: tensix_execute_unpacr: in_data_format=7 mismatches out_data_format=6
tests/ttnn/unit_tests/base_functionality/test_multi_device.py

# Sub-device tests - Requires fast dispatch which TTSim may not support fully
# Error: TT_FATAL - fast_dispatch requirement
tests/ttnn/unit_tests/base_functionality/test_sub_device.py

# Roll tests - TTSim unpacker issue with TILE layout
# Error: UndefinedBehavior: tensix_execute_unpacr: unpack_to_dst=0 in_data_format=0 out_data_format=0
tests/ttnn/unit_tests/base_functionality/test_roll.py

# Single device trace tests - Trace requires fast dispatch mode
# Error: RuntimeError at test_single_device_trace.py:93 and :31
tests/ttnn/unit_tests/base_functionality/test_single_device_trace.py

# Tilize/Untilize 2D tests - TTSim doesn't support INT32/UINT32/FLOAT32 tilize operations
# Many tests fail with integer data types
tests/ttnn/unit_tests/base_functionality/test_tilize_untilize_2D.py

# To layout tests - TTSim doesn't support INT32/UINT32/FLOAT32 tilize/untilize
# ~31 tests fail with integer data types
tests/ttnn/unit_tests/base_functionality/test_to_layout.py

# =============================================================================
# ELTWISE TESTS - INT32/UINT32/FLOAT32 data format limitations
# Error: UndefinedBehavior: tensix_execute_unpacr: in_data_format=8 (INT32)
# Error: UndefinedBehavior: tensix_execute_unpacr: in_data_format=0 (FLOAT32)
# =============================================================================

# INT32 binary operations - tensix_execute_unpacr doesn't support in_data_format=8
tests/ttnn/unit_tests/operations/eltwise/test_binary_int32.py

# UINT32 binary operations - tensix_execute_unpacr doesn't support UINT32
tests/ttnn/unit_tests/operations/eltwise/test_binary_uint32.py

# FLOAT32 binary operations - tensix_execute_unpacr doesn't support in_data_format=0
tests/ttnn/unit_tests/operations/eltwise/test_binary_fp32.py

# FLOAT32 unary operations - tensix_execute_unpacr doesn't support FLOAT32
tests/ttnn/unit_tests/operations/eltwise/test_unary_fp32.py

# UINT16 binary operations - tensix_execute_sfploadmacro not implemented
# Error: UnimplementedFunctionality: tensix_execute_sfploadmacro
tests/ttnn/unit_tests/operations/eltwise/test_binary_uint16.py

# UINT32 unary operations
tests/ttnn/unit_tests/operations/eltwise/test_unary_uint32.py

# Additional FP32 binary tests
tests/ttnn/unit_tests/operations/eltwise/test_binaryng_fp32.py

# Binary comparison init tests - UINT16 operations not supported
tests/ttnn/unit_tests/operations/eltwise/test_binary_comp_init.py

# Typecast tests - various data format issues
tests/ttnn/unit_tests/operations/eltwise/test_eltwise_typecast.py
tests/ttnn/unit_tests/operations/eltwise/test_binary_ng_typecast.py

# Ternary sharding - data format issues with sub_core_grid operations
tests/ttnn/unit_tests/operations/eltwise/test_ternary_sharding.py

# Pow tests - FLOAT32 issues
tests/ttnn/unit_tests/operations/eltwise/test_pow.py

# Relational tests - data format issues
tests/ttnn/unit_tests/operations/eltwise/test_relational.py

# Where tests - FLOAT32 tensix_execute_unpacr issues
tests/ttnn/unit_tests/operations/eltwise/test_where.py
tests/ttnn/unit_tests/operations/eltwise/test_experimental_where.py

# Unary tests - partial FLOAT32/INT32 failures
tests/ttnn/unit_tests/operations/eltwise/test_unary.py
tests/ttnn/unit_tests/operations/eltwise/test_unary_ops_ttnn.py
tests/ttnn/unit_tests/operations/eltwise/test_unary_int32.py
tests/ttnn/unit_tests/operations/eltwise/test_unary_minimum.py
tests/ttnn/unit_tests/operations/eltwise/test_unary_maximum.py
tests/ttnn/unit_tests/operations/eltwise/test_unary_activation.py

# Binary composite/bcast tests - partial data format issues
tests/ttnn/unit_tests/operations/eltwise/test_binary_composite.py
tests/ttnn/unit_tests/operations/eltwise/test_binary_bcast.py
tests/ttnn/unit_tests/operations/eltwise/test_binary_bcast_tcast.py
tests/ttnn/unit_tests/operations/eltwise/test_binary_minimum.py
tests/ttnn/unit_tests/operations/eltwise/test_binary_maximum.py

# Ternary tests - data format issues
tests/ttnn/unit_tests/operations/eltwise/test_ternary.py
tests/ttnn/unit_tests/operations/eltwise/test_ternary_composite.py

# Other eltwise with partial failures
tests/ttnn/unit_tests/operations/eltwise/test_activation.py
tests/ttnn/unit_tests/operations/eltwise/test_composite.py
tests/ttnn/unit_tests/operations/eltwise/test_divide.py
tests/ttnn/unit_tests/operations/eltwise/test_math.py
tests/ttnn/unit_tests/operations/eltwise/test_tanh_accuracy.py
tests/ttnn/unit_tests/operations/eltwise/test_typecast_int.py
tests/ttnn/unit_tests/operations/eltwise/test_sampling.py
tests/ttnn/unit_tests/operations/eltwise/test_fill.py
tests/ttnn/unit_tests/operations/eltwise/test_broadcast_to.py

# Additional eltwise tests with simulator limitations
tests/ttnn/unit_tests/operations/eltwise/test_gcd.py
tests/ttnn/unit_tests/operations/eltwise/test_div_ops.py
tests/ttnn/unit_tests/operations/eltwise/test_unary_i1.py
tests/ttnn/unit_tests/operations/eltwise/test_exp_21f.py
tests/ttnn/unit_tests/operations/eltwise/test_mul.py
tests/ttnn/unit_tests/operations/eltwise/test_remainder.py
tests/ttnn/unit_tests/operations/eltwise/test_nextafter.py
tests/ttnn/unit_tests/operations/eltwise/test_fmod.py
tests/ttnn/unit_tests/operations/eltwise/test_expm1.py

# =============================================================================
# POOL TESTS - Simulator limitations
# =============================================================================
tests/ttnn/unit_tests/operations/pool/test_avgpool2d.py
tests/ttnn/unit_tests/operations/pool/test_maxpool2d.py
tests/ttnn/unit_tests/operations/pool/test_mpwi.py
tests/ttnn/unit_tests/operations/pool/test_rotate.py

# =============================================================================
# CONV TESTS - Simulator limitations (timeout)
# =============================================================================
# This test times out (>300s) on simulator - too slow for CI
tests/ttnn/unit_tests/operations/conv/test_conv1d.py::test_conv1d_mamba[output_layout=Layout.TILE-math_fidelity=MathFidelity.LoFi-output_dtype=DataType.BFLOAT8_B-activations_dtype=DataType.BFLOAT16-weights_dtype=DataType.BFLOAT8_B-batch_size=1-output_channels=5120-input_channels=5120-input_length=1024-kernel_size=4-stride=1-padding=3-groups=5120-use_1d_systolic_array=True-config_override=None-device_params={'l1_small_size': 16384}]

# =============================================================================
# MATMUL TESTS - Simulator limitations
# =============================================================================
tests/ttnn/unit_tests/operations/matmul/test_addmm.py
tests/ttnn/unit_tests/operations/matmul/test_matmul.py
tests/ttnn/unit_tests/operations/matmul/test_linear.py
tests/ttnn/unit_tests/operations/matmul/test_sparse_matmul.py
tests/ttnn/unit_tests/operations/matmul/test_matmul_deepseek.py

# =============================================================================
# FUSED TESTS - Simulator limitations
# =============================================================================
tests/ttnn/unit_tests/operations/fused/test_batch_norm.py
tests/ttnn/unit_tests/operations/fused/test_layer_norm.py
tests/ttnn/unit_tests/operations/fused/test_softmax.py
tests/ttnn/unit_tests/operations/fused/test_layer_norm_sharded.py
tests/ttnn/unit_tests/operations/fused/test_group_norm.py

# =============================================================================
# TRANSFORMERS TESTS - Simulator limitations
# =============================================================================
tests/ttnn/unit_tests/operations/transformers/test_transformer.py

# =============================================================================
# REDUCE TESTS - Simulator limitations
# =============================================================================
tests/ttnn/unit_tests/operations/reduce/test_reduction_min.py
tests/ttnn/unit_tests/operations/reduce/test_reduction.py
tests/ttnn/unit_tests/operations/reduce/test_cumsum.py
tests/ttnn/unit_tests/operations/reduce/test_cumprod.py
tests/ttnn/unit_tests/operations/reduce/test_moe.py
