<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pack_untilize_block &mdash; TT-Metalium  documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/tt_theme.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/favicon.png"/>
    <link rel="canonical" href="/tt-metal/latest/tt-metalium/tt_metal/apis/kernel_apis/pack_unpack/pack_untilize.html" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js?v=b3ba4146"></script>
        <script src="../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="reconfig_data_format" href="reconfig_data_format.html" />
    <link rel="prev" title="pack_tile" href="pack_tile.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >



<a href="https://docs.tenstorrent.com/">
    <img src="../../../../_static/tt_logo.svg" class="logo" alt="Logo"/>
</a>

<a href="../../../../index.html">
    TT-Metalium
</a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../get_started/get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installing.html">Install</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">TT-Metalium</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../programming_model/index.html">Programming Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/index.html">Programming Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../advanced_topics/index.html">Advanced Topics</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">APIs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../host_apis.html">Host APIs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../kernel_apis.html">Kernel APIs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../kernel_apis.html#common-apis">Common APIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../kernel_apis.html#data-movement">Data Movement</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../kernel_apis.html#compute">Compute</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../compute/compute.html">Compute APIs</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="packing_apis.html">Packing APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sfpu/llk.html">Low Level Kernels</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/index.html">Tools</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../resources/support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../resources/contributing.html">Contributing as a developer</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">TT-Metalium</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">APIs</a></li>
          <li class="breadcrumb-item"><a href="../../kernel_apis.html">Kernel APIs</a></li>
          <li class="breadcrumb-item"><a href="packing_apis.html">Packing APIs</a></li>
      <li class="breadcrumb-item active">pack_untilize_block</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/tt_metal/apis/kernel_apis/pack_unpack/pack_untilize.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pack-untilize-block">
<h1>pack_untilize_block<a class="headerlink" href="#pack-untilize-block" title="Permalink to this heading"></a>
</h1>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I_8uint32_t_8uint32_t_b_NSt8uint32_tEEN7ckernel23pack_untilize_dest_initEv8uint32_t8uint32_t8uint32_t">
<span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">block_ct_dim</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">8</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">full_ct_dim</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_8uint32_t_8uint32_t_b_NSt8uint32_tEEN7ckernel23pack_untilize_dest_initEv8uint32_t8uint32_t8uint32_t" title="ckernel::pack_untilize_dest_init::block_ct_dim"><span class="n"><span class="pre">block_ct_dim</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">narrow_row</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">false</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">row_num_datums</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">TILE_C_DIM</span></span><span class="p"><span class="pre">&gt;</span></span><br><span class="target" id="namespaceckernel_1a2984e3be43a9b0aab314e5d6a9aa50f4"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-prename descclassname"><span class="n"><span class="pre">ckernel</span></span><span class="p"><span class="pre">::</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">pack_untilize_dest_init</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">ocb</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">face_r_dim</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">16</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">num_faces</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">4</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I_8uint32_t_8uint32_t_b_NSt8uint32_tEEN7ckernel23pack_untilize_dest_initEv8uint32_t8uint32_t8uint32_t" title="Permalink to this definition"></a><br>
</dt>
<dd>
<p>Performs the necessary hardware and software initialization for the pack untilize operation. This initialization function should be used when the desired PACK input is already in DEST register - therefore, it doesn’t configure UNPACK and MATH threads for transferring data from circular buffers to DEST register (this is done with <code class="docutils literal notranslate"><span class="pre">pack_untilize_init</span></code> function). Matching pack untilize operation for this initialization function is <code class="docutils literal notranslate"><span class="pre">pack_untilize_dest</span></code>. In order for this untilization to be performed correctly, some other function must place the tiles in the DEST register, e.g. <code class="docutils literal notranslate"><span class="pre">reduce_tile</span></code>, <code class="docutils literal notranslate"><span class="pre">copy_tile</span></code>, etc. This initialization function should, therefore, be called right after the op-specific initialization function (<code class="docutils literal notranslate"><span class="pre">reduce_init</span></code>, <code class="docutils literal notranslate"><span class="pre">copy_init</span></code>, etc.).</p>
<p>Since pack untilize works on a block of tiles, the user should specify the width of a single block (block_ct_dim), and the width of the full block (<code class="docutils literal notranslate"><span class="pre">full_ct_dim</span></code>). It is not needed to provide the height of the block during the initialization, since <code class="docutils literal notranslate"><span class="pre">pack_untilize_block</span></code> will loop over the height of the block. Note that the maximum size of the block is limited by the size of the DEST and synchronization mode used. These are maximum sizes:</p>
<ul class="simple">
<li><p>half-sync mode (16-bit mode): 8 tiles</p></li>
<li><p>half-sync mode (32-bit mode): 4 tiles</p></li>
<li><p>full-sync mode (16-bit mode): 16 tiles</p></li>
<li><p>full-sync mode (32-bit mode): 8 tiles</p></li>
</ul>

<p>NOTE: This function allows the user to specify <code class="docutils literal notranslate"><span class="pre">face_r_dim</span></code> and <code class="docutils literal notranslate"><span class="pre">num_faces</span></code> through function parameters. Setting these parameters results in an expensive MMIO write and cannot be avoided currently. This should be addressed more systematically within the issue tt-metal#22820, since these two values can be inferred from the circular buffer description, the same way as it is done in <code class="docutils literal notranslate"><span class="pre">llk_pack_hw_configure_disaggregated</span></code>. This would remove the need for <code class="docutils literal notranslate"><span class="pre">llk_pack_untilize_hw_configure_disaggregated</span></code> altogether and we would pay the price of the MMIO write only once, in <code class="docutils literal notranslate"><span class="pre">compute_kernel_hw_startup</span></code>.</p>
<p>Return value: None</p>
<p></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd">
<th class="head"><p>Param Type   </p></th>
<th class="head"><p>Name   </p></th>
<th class="head"><p>Description   </p></th>
<th class="head"><p>Type   </p></th>
<th class="head"><p>Valid Range   </p></th>
<th class="head"><p>Required    </p></th>
</tr>
</thead>
<tbody>
<tr class="row-even">
<td><p>Template   </p></td>
<td><p>block_ct_dim   </p></td>
<td><p>Width of a single block in tiles   </p></td>
<td><p>uint32_t   </p></td>
<td><p>1 to max (see note)   </p></td>
<td><p>False (default = 8)    </p></td>
</tr>
<tr class="row-odd">
<td><p>Template   </p></td>
<td><p>full_ct_dim   </p></td>
<td><p>Width of a full input in tiles   </p></td>
<td><p>uint32_t   </p></td>
<td><p>Divisible by block_ct_dim   </p></td>
<td><p>False    </p></td>
</tr>
<tr class="row-even">
<td><p>Template   </p></td>
<td><p>narrow_row   </p></td>
<td><p>Whether the provided input is narrow   </p></td>
<td><p>bool   </p></td>
<td><p>true/false   </p></td>
<td><p>False    </p></td>
</tr>
<tr class="row-odd">
<td><p>Template   </p></td>
<td><p>row_num_datums   </p></td>
<td><p>Number of datums per row   </p></td>
<td><p>uint32_t   </p></td>
<td><p>&gt;= 1   </p></td>
<td><p>False    </p></td>
</tr>
<tr class="row-even">
<td><p>Function   </p></td>
<td><p>ocb   </p></td>
<td><p>Output circular buffer identifier   </p></td>
<td><p>uint32_t   </p></td>
<td><p>0 to 31   </p></td>
<td><p>True    </p></td>
</tr>
<tr class="row-odd">
<td><p>Function   </p></td>
<td><p>face_r_dim   </p></td>
<td><p>Face height in rows   </p></td>
<td><p>uint32_t   </p></td>
<td><p>1, 8 or 16   </p></td>
<td><p>False (default = 16)    </p></td>
</tr>
<tr class="row-even">
<td><p>Function   </p></td>
<td><p>num_faces   </p></td>
<td><p>Number of faces   </p></td>
<td><p>uint32_t   </p></td>
<td><p>1, 2 or 4   </p></td>
<td><p>False (default = 4)   </p></td>
</tr>
</tbody>
</table>

</dd>
</dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I_8uint32_t_8uint32_tEN7ckernel18pack_untilize_initEv8uint32_t8uint32_t">
<span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">block_ct_dim</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">8</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">full_ct_dim</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_8uint32_t_8uint32_tEN7ckernel18pack_untilize_initEv8uint32_t8uint32_t" title="ckernel::pack_untilize_init::block_ct_dim"><span class="n"><span class="pre">block_ct_dim</span></span></a><span class="p"><span class="pre">&gt;</span></span><br><span class="target" id="namespaceckernel_1a1681ca689b515186bb5603d8b67b5c59"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-prename descclassname"><span class="n"><span class="pre">ckernel</span></span><span class="p"><span class="pre">::</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">pack_untilize_init</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">icb</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">ocb</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I_8uint32_t_8uint32_tEN7ckernel18pack_untilize_initEv8uint32_t8uint32_t" title="Permalink to this definition"></a><br>
</dt>
<dd>
<p>Performs the necessary hardware and software initialization for the pack untilize operation. Initializes all three threads: UNPACK, MATH, and PACK. This function should be used when the desired PACK input is not yet in DEST register. Internally, this function calls <code class="docutils literal notranslate"><span class="pre">pack_untilize_dest_init</span></code> to initialize the PACK thread.</p>
<p>Since pack untilize works on a block of tiles, the user should specify the width of a single block (block_ct_dim), and the width of the full block (<code class="docutils literal notranslate"><span class="pre">full_ct_dim</span></code>). It is not needed to provide the height of the block during the initialization, since <code class="docutils literal notranslate"><span class="pre">pack_untilize_block</span></code> will loop over the height of the block. Note that the maximum size of the block is limited by the size of the DEST and synchronization mode used. These are maximum sizes:</p>
<ul class="simple">
<li><p>half-sync mode (16-bit mode): 8 tiles</p></li>
<li><p>half-sync mode (32-bit mode): 4 tiles</p></li>
<li><p>full-sync mode (16-bit mode): 16 tiles</p></li>
<li><p>full-sync mode (32-bit mode): 8 tiles</p></li>
</ul>

<p>NOTE: This function uses default <code class="docutils literal notranslate"><span class="pre">face_r_dim</span></code> and <code class="docutils literal notranslate"><span class="pre">num_faces</span></code> values (16 and 4, respectively). Setting these parameters results in an expensive MMIO write and cannot be avoided currently. This should be addressed more systematically within the issue tt-metal#22820, since these two values can be inferred from the circular buffer description, the same way as it is done in <code class="docutils literal notranslate"><span class="pre">llk_pack_hw_configure_disaggregated</span></code>. This would remove the need for <code class="docutils literal notranslate"><span class="pre">llk_pack_untilize_hw_configure_disaggregated</span></code> altogether and we would pay the price of the MMIO write only once, in <code class="docutils literal notranslate"><span class="pre">compute_kernel_hw_startup</span></code>.</p>
<p>Return value: None</p>
<p></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd">
<th class="head"><p>Param Type   </p></th>
<th class="head"><p>Name   </p></th>
<th class="head"><p>Description   </p></th>
<th class="head"><p>Type   </p></th>
<th class="head"><p>Valid Range   </p></th>
<th class="head"><p>Required    </p></th>
</tr>
</thead>
<tbody>
<tr class="row-even">
<td><p>Template   </p></td>
<td><p>block_ct_dim   </p></td>
<td><p>Width of a single block in tiles   </p></td>
<td><p>uint32_t   </p></td>
<td><p>1 to max (see note)   </p></td>
<td><p>False (default = 8)    </p></td>
</tr>
<tr class="row-odd">
<td><p>Template   </p></td>
<td><p>full_ct_dim   </p></td>
<td><p>Width of a full input in tiles   </p></td>
<td><p>uint32_t   </p></td>
<td><p>Divisible by block_ct_dim   </p></td>
<td><p>False    </p></td>
</tr>
<tr class="row-even">
<td><p>Function   </p></td>
<td><p>icb   </p></td>
<td><p>Input circular buffer identifier   </p></td>
<td><p>uint32_t   </p></td>
<td><p>0 to 31   </p></td>
<td><p>True    </p></td>
</tr>
<tr class="row-odd">
<td><p>Function   </p></td>
<td><p>ocb   </p></td>
<td><p>Output circular buffer identifier   </p></td>
<td><p>uint32_t   </p></td>
<td><p>0 to 31   </p></td>
<td><p>True   </p></td>
</tr>
</tbody>
</table>

</dd>
</dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I_8uint32_t_8uint32_tEN7ckernel19pack_untilize_blockEv8uint32_t8uint32_t8uint32_t8uint32_t">
<span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">block_ct_dim</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">8</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">full_ct_dim</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_8uint32_t_8uint32_tEN7ckernel19pack_untilize_blockEv8uint32_t8uint32_t8uint32_t8uint32_t" title="ckernel::pack_untilize_block::block_ct_dim"><span class="n"><span class="pre">block_ct_dim</span></span></a><span class="p"><span class="pre">&gt;</span></span><br><span class="target" id="namespaceckernel_1ae5cbff7151a332c38fee0aca18eb1995"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-prename descclassname"><span class="n"><span class="pre">ckernel</span></span><span class="p"><span class="pre">::</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">pack_untilize_block</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">icb</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">block_rt_dim</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">ocb</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">block_c_index</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I_8uint32_t_8uint32_tEN7ckernel19pack_untilize_blockEv8uint32_t8uint32_t8uint32_t8uint32_t" title="Permalink to this definition"></a><br>
</dt>
<dd>
<p>Performs the untilize operation on a block of tiles. Loops over the provided block size. The block is characterized by its width in tiles (block_ct_dim) and height in tiles (block_rt_dim). The width of the block has to be the same as the one provided during the initialization of the pack untilize operation (<code class="docutils literal notranslate"><span class="pre">pack_untilize_init</span></code>). It is not needed to provide the height of the block during the initialization, since <code class="docutils literal notranslate"><span class="pre">pack_untilize_block</span></code> will loop over the height of the block. Note that the maximum size of the block is limited by the size of the DEST and synchronization mode used. These are maximum sizes:</p>
<ul class="simple">
<li><p>half-sync mode (16-bit mode): 8 tiles</p></li>
<li><p>half-sync mode (32-bit mode): 4 tiles</p></li>
<li><p>full-sync mode (16-bit mode): 16 tiles</p></li>
<li><p>full-sync mode (32-bit mode): 8 tiles</p></li>
</ul>

<p>Return value: None</p>
<p></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd">
<th class="head"><p>Param Type   </p></th>
<th class="head"><p>Name   </p></th>
<th class="head"><p>Description   </p></th>
<th class="head"><p>Type   </p></th>
<th class="head"><p>Valid Range   </p></th>
<th class="head"><p>Required    </p></th>
</tr>
</thead>
<tbody>
<tr class="row-even">
<td><p>Template   </p></td>
<td><p>block_ct_dim   </p></td>
<td><p>Width of a single block in tiles   </p></td>
<td><p>uint32_t   </p></td>
<td><p>1 to max (see note)   </p></td>
<td><p>False (default = 8)    </p></td>
</tr>
<tr class="row-odd">
<td><p>Template   </p></td>
<td><p>full_ct_dim   </p></td>
<td><p>Width of a full input in tiles   </p></td>
<td><p>uint32_t   </p></td>
<td><p>Divisible by block_ct_dim   </p></td>
<td><p>False    </p></td>
</tr>
<tr class="row-even">
<td><p>Function   </p></td>
<td><p>icb   </p></td>
<td><p>Input circular buffer identifier   </p></td>
<td><p>uint32_t   </p></td>
<td><p>0 to 31   </p></td>
<td><p>True    </p></td>
</tr>
<tr class="row-odd">
<td><p>Function   </p></td>
<td><p>block_rt_dim   </p></td>
<td><p>Height of a single block in tiles   </p></td>
<td><p>uint32_t   </p></td>
<td><p>&gt;= 1   </p></td>
<td><p>True    </p></td>
</tr>
<tr class="row-even">
<td><p>Function   </p></td>
<td><p>ocb   </p></td>
<td><p>Output circular buffer identifier   </p></td>
<td><p>uint32_t   </p></td>
<td><p>0 to 31   </p></td>
<td><p>True    </p></td>
</tr>
<tr class="row-odd">
<td><p>Function   </p></td>
<td><p>block_c_index   </p></td>
<td><p>Index of the currently processed block   </p></td>
<td><p>uint32_t   </p></td>
<td><p>&gt;= 0   </p></td>
<td><p>False   </p></td>
</tr>
</tbody>
</table>

</dd>
</dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I_8uint32_t_8uint32_t_b_b_NSt8uint32_tE_8uint32_tEN7ckernel18pack_untilize_destEv8uint32_t8uint32_t8uint32_t8uint32_t8uint32_t8uint32_t">
<span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">block_ct_dim</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">8</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">full_ct_dim</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I_8uint32_t_8uint32_t_b_b_NSt8uint32_tE_8uint32_tEN7ckernel18pack_untilize_destEv8uint32_t8uint32_t8uint32_t8uint32_t8uint32_t8uint32_t" title="ckernel::pack_untilize_dest::block_ct_dim"><span class="n"><span class="pre">block_ct_dim</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">diagonal</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">false</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">narrow_row</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">false</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">row_num_datums</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">TILE_C_DIM</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">tile_dst_ct_offset</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><span class="p"><span class="pre">&gt;</span></span><br><span class="target" id="namespaceckernel_1a0b295071c7ff38ee8312cca1a3cbc684"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-prename descclassname"><span class="n"><span class="pre">ckernel</span></span><span class="p"><span class="pre">::</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">pack_untilize_dest</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">ocb</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">block_rt_dim</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">1</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">block_c_index</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">face_r_dim</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">16</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">num_faces</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">4</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">tile_dst_rt_offset</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I_8uint32_t_8uint32_t_b_b_NSt8uint32_tE_8uint32_tEN7ckernel18pack_untilize_destEv8uint32_t8uint32_t8uint32_t8uint32_t8uint32_t8uint32_t" title="Permalink to this definition"></a><br>
</dt>
<dd>
<p>Performs the pack untilize operation when PACK input is already in DEST register. In order to properly initialize the operation, a call to <code class="docutils literal notranslate"><span class="pre">pack_untilize_dest_init</span></code> must be made before this function. The width of the block has to be the same as the one provided during the initialization of the pack untilize operation (<code class="docutils literal notranslate"><span class="pre">pack_untilize_dest_init</span></code>). In order for this untilization to be performed correctly, some other function must place the tiles in the DEST register, e.g. <code class="docutils literal notranslate"><span class="pre">reduce_tile</span></code>, <code class="docutils literal notranslate"><span class="pre">copy_tile</span></code>, etc. Similarly as <code class="docutils literal notranslate"><span class="pre">pack_untilize_block</span></code>, this function operates on a whole block that needs to be untilized. Note that the maximum size of the block is limited by the size of the DEST and synchronization mode used. These are maximum sizes:</p>
<ul class="simple">
<li><p>half-sync mode (16-bit mode): 8 tiles</p></li>
<li><p>half-sync mode (32-bit mode): 4 tiles</p></li>
<li><p>full-sync mode (16-bit mode): 16 tiles</p></li>
<li><p>full-sync mode (32-bit mode): 8 tiles</p></li>
</ul>

<p>Return value: None</p>
<p></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd">
<th class="head"><p>Param Type   </p></th>
<th class="head"><p>Name   </p></th>
<th class="head"><p>Description   </p></th>
<th class="head"><p>Type   </p></th>
<th class="head"><p>Valid Range   </p></th>
<th class="head"><p>Required    </p></th>
</tr>
</thead>
<tbody>
<tr class="row-even">
<td><p>Template   </p></td>
<td><p>block_ct_dim   </p></td>
<td><p>Width of a single block in tiles   </p></td>
<td><p>uint32_t   </p></td>
<td><p>1 to max (see note)   </p></td>
<td><p>False (default = 8)    </p></td>
</tr>
<tr class="row-odd">
<td><p>Template   </p></td>
<td><p>full_ct_dim   </p></td>
<td><p>Width of a full input in tiles   </p></td>
<td><p>uint32_t   </p></td>
<td><p>Divisible by block_ct_dim   </p></td>
<td><p>False    </p></td>
</tr>
<tr class="row-even">
<td><p>Template   </p></td>
<td><p>diagonal   </p></td>
<td><p>Whether to use diagonal packing   </p></td>
<td><p>bool   </p></td>
<td><p>true/false   </p></td>
<td><p>False    </p></td>
</tr>
<tr class="row-odd">
<td><p>Template   </p></td>
<td><p>narrow_row   </p></td>
<td><p>Whether the provided input is narrow   </p></td>
<td><p>bool   </p></td>
<td><p>true/false   </p></td>
<td><p>False    </p></td>
</tr>
<tr class="row-even">
<td><p>Template   </p></td>
<td><p>row_num_datums   </p></td>
<td><p>Number of datums per row   </p></td>
<td><p>uint32_t   </p></td>
<td><p>&gt;= 1   </p></td>
<td><p>False    </p></td>
</tr>
<tr class="row-odd">
<td><p>Template   </p></td>
<td><p>tile_dst_ct_offset   </p></td>
<td><p>Compile time offset for the index of the tile in the dest from which to pack   </p></td>
<td><p>uint32_t   </p></td>
<td><p>0 to 7 (0 to 3 if fp32 dest is enabled)   </p></td>
<td><p>False (default=0)    </p></td>
</tr>
<tr class="row-even">
<td><p>Function   </p></td>
<td><p>ocb   </p></td>
<td><p>Output circular buffer identifier   </p></td>
<td><p>uint32_t   </p></td>
<td><p>0 to 31   </p></td>
<td><p>True    </p></td>
</tr>
<tr class="row-odd">
<td><p>Function   </p></td>
<td><p>block_rt_dim   </p></td>
<td><p>Height of a single block in tiles   </p></td>
<td><p>uint32_t   </p></td>
<td><p>&gt;= 1   </p></td>
<td><p>False (default=1)    </p></td>
</tr>
<tr class="row-even">
<td><p>Function   </p></td>
<td><p>block_c_index   </p></td>
<td><p>Block column index (used when full_ct_dim &gt; block_ct_dim)   </p></td>
<td><p>uint32_t   </p></td>
<td><p>&gt;= 0   </p></td>
<td><p>False (default=0)    </p></td>
</tr>
<tr class="row-odd">
<td><p>Function   </p></td>
<td><p>face_r_dim   </p></td>
<td><p>Face height in rows   </p></td>
<td><p>uint32_t   </p></td>
<td><p>1, 8 or 16   </p></td>
<td><p>False (default=16)    </p></td>
</tr>
<tr class="row-even">
<td><p>Function   </p></td>
<td><p>num_faces   </p></td>
<td><p>Number of faces   </p></td>
<td><p>uint32_t   </p></td>
<td><p>1, 2 or 4   </p></td>
<td><p>False (default=4)    </p></td>
</tr>
<tr class="row-odd">
<td><p>Function   </p></td>
<td><p>tile_dst_offset   </p></td>
<td><p>Runtime offset for the index of the tile in the dest from which to pack   </p></td>
<td><p>uint32_t   </p></td>
<td><p>0 to 7 (0 to 3 if fp32 dest is enabled)   </p></td>
<td><p>False (default=0)   </p></td>
</tr>
</tbody>
</table>

</dd>
</dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N7ckernel20pack_untilize_uninitE8uint32_t">
<span class="target" id="namespaceckernel_1abae31e280ba0c19a0019b32be9e675df"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-prename descclassname"><span class="n"><span class="pre">ckernel</span></span><span class="p"><span class="pre">::</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">pack_untilize_uninit</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">ocb</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N7ckernel20pack_untilize_uninitE8uint32_t" title="Permalink to this definition"></a><br>
</dt>
<dd>
<p>Uninitializes the pack untilize operation, allowing another operations to be initialized. Needs to be called after the last call to <code class="docutils literal notranslate"><span class="pre">pack_untilize_dest</span></code> or <code class="docutils literal notranslate"><span class="pre">pack_untilize_block</span></code>, before initializing another operation.</p>
<p>NOTE: This function is not in line with our programming model, and will be removed by the end of 2025 as a part of tt-metal#22904.</p>
<p>Return value: None</p>
<p></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd">
<th class="head"><p>Param Type   </p></th>
<th class="head"><p>Name   </p></th>
<th class="head"><p>Description   </p></th>
<th class="head"><p>Type   </p></th>
<th class="head"><p>Valid Range   </p></th>
<th class="head"><p>Required    </p></th>
</tr>
</thead>
<tbody>
<tr class="row-even">
<td><p>Function   </p></td>
<td><p>ocb   </p></td>
<td><p>Output circular buffer identifier   </p></td>
<td><p>uint32_t   </p></td>
<td><p>0 to 31   </p></td>
<td><p>True   </p></td>
</tr>
</tbody>
</table>

</dd>
</dl>

</section>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pack_tile.html" class="btn btn-neutral float-left" title="pack_tile" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="reconfig_data_format.html" class="btn btn-neutral float-right" title="reconfig_data_format" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Tenstorrent.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        Version: <span id="current-version">latest</span>
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl id="version-list">
            <dt>Versions</dt>
        </dl>
        <br>
        </dl>
    </div>
</div>

<script>
const VERSIONS_URL = 'https://raw.githubusercontent.com/tenstorrent/tt-metal/refs/heads/main/docs/published_versions.json';

async function loadVersions() {
    try {
        const response = await fetch(VERSIONS_URL);
        const data = await response.json();
        const versionList = document.getElementById('version-list');
        const projectCode = location.pathname.split('/')[3];

        data.versions.forEach(version => {
            const dd = document.createElement('dd');
            const link = document.createElement('a');
            link.href = `https://docs.tenstorrent.com/tt-metal/${version}/${projectCode}/index.html`;
            link.textContent = version;
            dd.appendChild(link);
            versionList.appendChild(dd);
        });
    } catch (error) {
        console.error('Error loading versions:', error);
    }
}

loadVersions();

function getCurrentVersion() {
    return window.location.pathname.split('/')[2];
}
document.getElementById('current-version').textContent = getCurrentVersion();

const versionEl = document.createElement("span");
versionEl.innerText = getCurrentVersion();
versionEl.className = "project-versions";
const wySideSearchEl = document.getElementsByClassName("wy-side-nav-search").item(0);
if (wySideSearchEl) {
    const projectNameEl = wySideSearchEl.children.item(1);
    if (projectNameEl) projectNameEl.appendChild(versionEl);
}

</script><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>