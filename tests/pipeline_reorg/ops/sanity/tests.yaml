# This file defines the test matrix for the Ops Sanity pipeline.

# Each entry represents a parallel job with the following keys:
#   name: The display name for the job in GitHub Actions.
#   cmd: The exact command to run for the test.
#   sku: Machine type to target (e.g. N300, P150b).
#   owner_id: The Slack user ID to notify on failure.
#   timeout: The maximum allowed runtime for this job in minutes.

# The following two tests are examples. They should be removed before this workflow is enabled in APC.
- name: example_test
  cmd: ./tests/scripts/run_ttnn_examples.sh
  owner_id: U08DEGUJY3H # Rose Li
  sku: N300
  timeout: 5

- name: example_test_BH
  cmd: ./tests/scripts/run_ttnn_examples.sh
  owner_id: U08DEGUJY3H # Rose Li
  sku: P150b
  timeout: 5

# The following tests should be uncommented after removing the same tests from APC and BHPC.
# The timeouts are approximate and should be adjusted to the actual runtime of the tests before enabling.
# Moreh and Transformers group assigned to Chris Maryan by default due to lack of owner.

#- name: ttnn eltwise group 1
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/eltwise -xv --splits 8 --group 1 -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: N300
#  timeout: 40
#- name: ttnn eltwise group 2
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/eltwise -xv --splits 8 --group 2 -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: N300
#  timeout: 40
#- name: ttnn eltwise group 3
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/eltwise -xv --splits 8 --group 3 -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: N300
#  timeout: 40
#- name: ttnn eltwise group 4
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/eltwise -xv --splits 8 --group 4 -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: N300
#  timeout: 40
#- name: ttnn eltwise group 5
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/eltwise -xv --splits 8 --group 5 -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: N300
#  timeout: 40
#- name: ttnn eltwise group 6
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/eltwise -xv --splits 8 --group 6 -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: N300
#  timeout: 40
#- name: ttnn eltwise group 7
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/eltwise -xv --splits 8 --group 7 -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: N300
#  timeout: 40
#- name: ttnn eltwise group 8
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/eltwise -xv --splits 8 --group 8 -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: N300
#  timeout: 40
#- name: ttnn data_movement/ccl group 1
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/data_movement tests/ttnn/unit_tests/operations/ccl tests/ttnn/unit_tests/operations/point_to_point -xv --splits 3 --group 1 -m "not disable_fast_runtime_mode"
#  owner_id: U05ACKAJTHS # Naif Tarafdar
#  sku: N300
#  timeout: 40
#- name: ttnn data_movement/ccl group 2
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/data_movement tests/ttnn/unit_tests/operations/ccl tests/ttnn/unit_tests/operations/point_to_point -xv --splits 3 --group 2 -m "not disable_fast_runtime_mode"
#  owner_id: U05ACKAJTHS # Naif Tarafdar
#  sku: N300
#  timeout: 40
#- name: ttnn data_movement/ccl group 3
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/data_movement tests/ttnn/unit_tests/operations/ccl tests/ttnn/unit_tests/operations/point_to_point -xv --splits 3 --group 3 -m "not disable_fast_runtime_mode"
#  owner_id: U05ACKAJTHS # Naif Tarafdar
#  sku: N300
#  timeout: 40
#- name: ttnn conv group
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/conv -xv -m "not disable_fast_runtime_mode"
#  owner_id: U085GDCAZTN # Pavle Josipovic
#  sku: N300
#  timeout: 40
#- name: ttnn pool group
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/pool -xv -m "not disable_fast_runtime_mode"
#  owner_id: U085GDCAZTN # Pavle Josipovic
#  sku: N300
#  timeout: 40
#- name: ttnn matmul group
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/matmul -xv -m "not disable_fast_runtime_mode"
#  owner_id: U084B1CES7M # Borys Bradel
#  sku: N300
#  timeout: 40
#- name: ttnn fused group
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/fused -xv -m "not disable_fast_runtime_mode"
#  owner_id: U084B1CES7M # Borys Bradel
#  sku: N300
#  timeout: 40
#- name: ttnn moreh group
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/moreh -xv -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: N300
#  timeout: 40
#- name: ttnn transformers group
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/transformers -xv -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: N300
#  timeout: 40
#- name: ttnn reduce and misc ops group
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/reduce tests/ttnn/unit_tests/operations/rand tests/ttnn/unit_tests/operations/debug
#  owner_id: U084B1CES7M # Borys Bradel
#  sku: N300
#  timeout: 40

# BH section. TODO: combine skus into one test block to avoid duplication.
#- name: ttnn eltwise group 1
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/eltwise -xv --splits 8 --group 1 -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: P150b
#  timeout: 40
#- name: ttnn eltwise group 2
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/eltwise -xv --splits 8 --group 2 -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: P150b
#  timeout: 40
#- name: ttnn eltwise group 3
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/eltwise -xv --splits 8 --group 3 -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: P150b
#  timeout: 40
#- name: ttnn eltwise group 4
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/eltwise -xv --splits 8 --group 4 -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: P150b
#  timeout: 40
#- name: ttnn eltwise group 5
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/eltwise -xv --splits 8 --group 5 -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: P150b
#  timeout: 40
#- name: ttnn eltwise group 6
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/eltwise -xv --splits 8 --group 6 -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: P150b
#  timeout: 40
#- name: ttnn eltwise group 7
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/eltwise -xv --splits 8 --group 7 -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: P150b
#  timeout: 40
#- name: ttnn eltwise group 8
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/eltwise -xv --splits 8 --group 8 -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: P150b
#  timeout: 40
#- name: ttnn data_movement/ccl group 1
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/data_movement tests/ttnn/unit_tests/operations/ccl tests/ttnn/unit_tests/operations/point_to_point -xv --splits 3 --group 1 -m "not disable_fast_runtime_mode"
#  owner_id: U05ACKAJTHS # Naif Tarafdar
#  sku: P150b
#  timeout: 40
#- name: ttnn data_movement/ccl group 2
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/data_movement tests/ttnn/unit_tests/operations/ccl tests/ttnn/unit_tests/operations/point_to_point -xv --splits 3 --group 2 -m "not disable_fast_runtime_mode"
#  owner_id: U05ACKAJTHS # Naif Tarafdar
#  sku: P150b
#  timeout: 40
#- name: ttnn data_movement/ccl group 3
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/data_movement tests/ttnn/unit_tests/operations/ccl tests/ttnn/unit_tests/operations/point_to_point -xv --splits 3 --group 3 -m "not disable_fast_runtime_mode"
#  owner_id: U05ACKAJTHS # Naif Tarafdar
#  sku: P150b
#  timeout: 40
#- name: ttnn conv group
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/conv -xv -m "not disable_fast_runtime_mode"
#  owner_id: U085GDCAZTN # Pavle Josipovic
#  sku: P150b
#  timeout: 40
#- name: ttnn pool group
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/pool -xv -m "not disable_fast_runtime_mode"
#  owner_id: U085GDCAZTN # Pavle Josipovic
#  sku: P150b
#  timeout: 40
#- name: ttnn matmul group
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/matmul -xv -m "not disable_fast_runtime_mode"
#  owner_id: U084B1CES7M # Borys Bradel
#  sku: P150b
#  timeout: 40
#- name: ttnn fused group
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/fused -xv -m "not disable_fast_runtime_mode"
#  owner_id: U084B1CES7M # Borys Bradel
#  sku: P150b
#  timeout: 40
#- name: ttnn moreh group
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/moreh -xv -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: P150b
#  timeout: 40
#- name: ttnn transformers group
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/transformers -xv -m "not disable_fast_runtime_mode"
#  owner_id: U08411R54Q2 # Chris Maryan
#  sku: P150b
#  timeout: 40
#- name: ttnn reduce and misc ops group
#  cmd: pytest -n auto --timeout 300 tests/ttnn/unit_tests/operations/reduce tests/ttnn/unit_tests/operations/rand tests/ttnn/unit_tests/operations/debug
#  owner_id: U084B1CES7M # Borys Bradel
#  sku: P150b
#  timeout: 40
