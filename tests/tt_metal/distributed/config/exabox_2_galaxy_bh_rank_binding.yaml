# SPDX-FileCopyrightText: Â© 2025 Tenstorrent Inc.
# SPDX-License-Identifier: Apache-2.0
#
# Rank Binding for 2-Galaxy Exabox Configuration (Blackhole)
#
# This binds two MPI ranks to two separate Galaxies on the exabox.
# Process 0 (rank=0): Galaxy 0 (mesh_id=0) - Sender
# Process 1 (rank=1): Galaxy 1 (mesh_id=1) - Receiver
#
# oion between Galaxies: 4 ethernet channels
#
# Note: On exabox, each Galaxy is a separate physical system managed by a single host.
# The TT_VISIBLE_DEVICES is typically not needed when each rank runs on its own host.
# If running both ranks from a single host (e.g., for testing), you would need to
# set TT_VISIBLE_DEVICES appropriately based on PCIe enumeration.

rank_bindings:
  - rank: 0
    mesh_id: 0
    mesh_host_rank: 0
    env_overrides:
      TT_METAL_PROFILER_DIR: "tests/ttnn/distributed/profiler_artifacts_sender_0"
      TT_METAL_LOGGER_LEVEL: "DEBUG"

  - rank: 1
    mesh_id: 1
    mesh_host_rank: 0
    env_overrides:
      TT_METAL_PROFILER_DIR: "tests/ttnn/distributed/profiler_artifacts_receiver_1"
      TT_METAL_LOGGER_LEVEL: "DEBUG"

mesh_graph_desc_path: "tests/tt_metal/tt_fabric/custom_mesh_descriptors/2_galaxy_bh_exabox_mgd.textproto"
