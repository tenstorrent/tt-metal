# SPDX-FileCopyrightText: Â© 2025 Tenstorrent Inc.
# SPDX-License-Identifier: Apache-2.0
#
# Rank Binding for 2-Galaxy 1x8 Configuration
#
# This binds two MPI ranks to two separate Galaxies using 1x8 (8 devices) per Galaxy.
# Process 0 (rank=0): Galaxy 0 (mesh_id=0) - Sender
# Process 1 (rank=1): Galaxy 1 (mesh_id=1) - Receiver
#
# Uses TT_VISIBLE_DEVICES to limit each rank to 8 devices (0-7).

rank_bindings:
  - rank: 0
    mesh_id: 0
    mesh_host_rank: 0
    env_overrides:
      TT_METAL_PROFILER_DIR: "tests/ttnn/distributed/profiler_artifacts_sender_0"
      TT_VISIBLE_DEVICES: "0,1,2,3,4,5,6,7"

  - rank: 1
    mesh_id: 1
    mesh_host_rank: 0
    env_overrides:
      TT_METAL_PROFILER_DIR: "tests/ttnn/distributed/profiler_artifacts_receiver_1"
      TT_VISIBLE_DEVICES: "0,1,2,3,4,5,6,7"

mesh_graph_desc_path: "tests/tt_metal/tt_fabric/custom_mesh_descriptors/2_galaxy_1x8_mgd.textproto"
