# Physical mesh configuration (optional)
physical_mesh:
   mesh_descriptor_path: "tests/tt_metal/tt_fabric/custom_mesh_descriptors/t3k_2x2_mesh_graph_descriptor.yaml"
   eth_coord_mapping: [
    [[0, 0, 0, 0, 0], [0, 1, 0, 0, 0], [0, 0, 1, 0, 0], [0, 1, 1, 0, 0]],
    [[0, 2, 0, 0, 0], [0, 3, 0, 0, 0], [0, 2, 1, 0, 0], [0, 3, 1, 0, 0]]
    ]

# Fabric configuration (required)
fabric_config:
  topology: Mesh
  routing_type: Dynamic

# Test definitions (required)
tests:
  # - name: "all_to_all_test"
  #   num_iterations: 1
  #   memory_config:
  #     fifo_size: [1024, 2048]
  #     page_size: [256, 512]
  #     data_size: 4096
  #     num_transactions: 15
  #   pattern_expansions:
  #     - type: "all_to_all_devices"
  #       core_coord: [0, 0]
  - name: "broadcast_test"
    num_iterations: 1
    memory_config:
      fifo_size: [1024, 2048]
      page_size: [256, 512]
      data_size: 4096
      num_transactions: 15
    sockets:
      - sender_rank: 0
        receiver_rank: 1
        connections:
          - sender:
              mesh_coord: [0, 0]
              core_coord: [0, 0]
            receiver:
              mesh_coord: [0, 0]
              core_coord: [1, 1]
          - sender:
              mesh_coord: [0, 0]
              core_coord: [0, 0]
            receiver:
              mesh_coord: [1, 0]
              core_coord: [1, 1]
        
