# Mock PSD for testing graph topology policy
# This represents a 2-mesh system with only 2 channels between meshes
# (insufficient for STRICT policy requiring 8 channels)
# Mesh 0: ASICs 100-107 on host0 (2x4 = 8 ASICs)
# Mesh 1: ASICs 200-207 on host1 (2x4 = 8 ASICs)
# Only 2 channels between meshes (should fail STRICT, pass RELAXED)
target_device_type: 0
system_graph {
  # Host0: Mesh 0
  asic_connectivity_graph {
    host_name: "host0"
    # Mesh 0: ASICs 100-107 (2x4 grid)
    # Intra-mesh connections (2 channels per edge)
    asic_topologies {
      asic_id: 100
      topology {
        # Connect to ASIC 101 (right neighbor)
        asic_connections {
          dst_asic_id: 101
          eth_connections { src_chan: 0 dst_chan: 0 is_local: true }
          eth_connections { src_chan: 1 dst_chan: 1 is_local: true }
        }
        # Connect to ASIC 104 (bottom neighbor)
        asic_connections {
          dst_asic_id: 104
          eth_connections { src_chan: 2 dst_chan: 2 is_local: true }
          eth_connections { src_chan: 3 dst_chan: 3 is_local: true }
        }
        # Cross-mesh connection to ASIC 200 (only 2 channels - insufficient for STRICT)
        asic_connections {
          dst_asic_id: 200
          eth_connections { src_chan: 4 dst_chan: 4 is_local: false }
          eth_connections { src_chan: 5 dst_chan: 5 is_local: false }
        }
      }
    }
    asic_topologies {
      asic_id: 101
      topology {
        asic_connections {
          dst_asic_id: 100
          eth_connections { src_chan: 0 dst_chan: 0 is_local: true }
          eth_connections { src_chan: 1 dst_chan: 1 is_local: true }
        }
        asic_connections {
          dst_asic_id: 102
          eth_connections { src_chan: 2 dst_chan: 2 is_local: true }
          eth_connections { src_chan: 3 dst_chan: 3 is_local: true }
        }
        asic_connections {
          dst_asic_id: 105
          eth_connections { src_chan: 4 dst_chan: 4 is_local: true }
          eth_connections { src_chan: 5 dst_chan: 5 is_local: true }
        }
      }
    }
    asic_topologies {
      asic_id: 102
      topology {
        asic_connections {
          dst_asic_id: 101
          eth_connections { src_chan: 0 dst_chan: 0 is_local: true }
          eth_connections { src_chan: 1 dst_chan: 1 is_local: true }
        }
        asic_connections {
          dst_asic_id: 103
          eth_connections { src_chan: 2 dst_chan: 2 is_local: true }
          eth_connections { src_chan: 3 dst_chan: 3 is_local: true }
        }
        asic_connections {
          dst_asic_id: 106
          eth_connections { src_chan: 4 dst_chan: 4 is_local: true }
          eth_connections { src_chan: 5 dst_chan: 5 is_local: true }
        }
      }
    }
    asic_topologies {
      asic_id: 103
      topology {
        asic_connections {
          dst_asic_id: 102
          eth_connections { src_chan: 0 dst_chan: 0 is_local: true }
          eth_connections { src_chan: 1 dst_chan: 1 is_local: true }
        }
        asic_connections {
          dst_asic_id: 107
          eth_connections { src_chan: 2 dst_chan: 2 is_local: true }
          eth_connections { src_chan: 3 dst_chan: 3 is_local: true }
        }
      }
    }
    asic_topologies {
      asic_id: 104
      topology {
        asic_connections {
          dst_asic_id: 100
          eth_connections { src_chan: 0 dst_chan: 0 is_local: true }
          eth_connections { src_chan: 1 dst_chan: 1 is_local: true }
        }
        asic_connections {
          dst_asic_id: 105
          eth_connections { src_chan: 2 dst_chan: 2 is_local: true }
          eth_connections { src_chan: 3 dst_chan: 3 is_local: true }
        }
      }
    }
    asic_topologies {
      asic_id: 105
      topology {
        asic_connections {
          dst_asic_id: 101
          eth_connections { src_chan: 0 dst_chan: 0 is_local: true }
          eth_connections { src_chan: 1 dst_chan: 1 is_local: true }
        }
        asic_connections {
          dst_asic_id: 104
          eth_connections { src_chan: 2 dst_chan: 2 is_local: true }
          eth_connections { src_chan: 3 dst_chan: 3 is_local: true }
        }
        asic_connections {
          dst_asic_id: 106
          eth_connections { src_chan: 4 dst_chan: 4 is_local: true }
          eth_connections { src_chan: 5 dst_chan: 5 is_local: true }
        }
      }
    }
    asic_topologies {
      asic_id: 106
      topology {
        asic_connections {
          dst_asic_id: 102
          eth_connections { src_chan: 0 dst_chan: 0 is_local: true }
          eth_connections { src_chan: 1 dst_chan: 1 is_local: true }
        }
        asic_connections {
          dst_asic_id: 105
          eth_connections { src_chan: 2 dst_chan: 2 is_local: true }
          eth_connections { src_chan: 3 dst_chan: 3 is_local: true }
        }
        asic_connections {
          dst_asic_id: 107
          eth_connections { src_chan: 4 dst_chan: 4 is_local: true }
          eth_connections { src_chan: 5 dst_chan: 5 is_local: true }
        }
      }
    }
    asic_topologies {
      asic_id: 107
      topology {
        asic_connections {
          dst_asic_id: 103
          eth_connections { src_chan: 0 dst_chan: 0 is_local: true }
          eth_connections { src_chan: 1 dst_chan: 1 is_local: true }
        }
        asic_connections {
          dst_asic_id: 106
          eth_connections { src_chan: 2 dst_chan: 2 is_local: true }
          eth_connections { src_chan: 3 dst_chan: 3 is_local: true }
        }
      }
    }
  }
  # Host1: Mesh 1
  asic_connectivity_graph {
    host_name: "host1"
    # Mesh 1: ASICs 200-207 (2x4 grid)
    asic_topologies {
      asic_id: 200
      topology {
        # Cross-mesh connection from ASIC 100 (only 2 channels - insufficient for STRICT)
        asic_connections {
          dst_asic_id: 100
          eth_connections { src_chan: 4 dst_chan: 4 is_local: false }
          eth_connections { src_chan: 5 dst_chan: 5 is_local: false }
        }
        # Intra-mesh connections
        asic_connections {
          dst_asic_id: 201
          eth_connections { src_chan: 0 dst_chan: 0 is_local: true }
          eth_connections { src_chan: 1 dst_chan: 1 is_local: true }
        }
        asic_connections {
          dst_asic_id: 204
          eth_connections { src_chan: 2 dst_chan: 2 is_local: true }
          eth_connections { src_chan: 3 dst_chan: 3 is_local: true }
        }
      }
    }
    asic_topologies {
      asic_id: 201
      topology {
        asic_connections {
          dst_asic_id: 200
          eth_connections { src_chan: 0 dst_chan: 0 is_local: true }
          eth_connections { src_chan: 1 dst_chan: 1 is_local: true }
        }
        asic_connections {
          dst_asic_id: 202
          eth_connections { src_chan: 2 dst_chan: 2 is_local: true }
          eth_connections { src_chan: 3 dst_chan: 3 is_local: true }
        }
        asic_connections {
          dst_asic_id: 205
          eth_connections { src_chan: 4 dst_chan: 4 is_local: true }
          eth_connections { src_chan: 5 dst_chan: 5 is_local: true }
        }
      }
    }
    asic_topologies {
      asic_id: 202
      topology {
        asic_connections {
          dst_asic_id: 201
          eth_connections { src_chan: 0 dst_chan: 0 is_local: true }
          eth_connections { src_chan: 1 dst_chan: 1 is_local: true }
        }
        asic_connections {
          dst_asic_id: 203
          eth_connections { src_chan: 2 dst_chan: 2 is_local: true }
          eth_connections { src_chan: 3 dst_chan: 3 is_local: true }
        }
        asic_connections {
          dst_asic_id: 206
          eth_connections { src_chan: 4 dst_chan: 4 is_local: true }
          eth_connections { src_chan: 5 dst_chan: 5 is_local: true }
        }
      }
    }
    asic_topologies {
      asic_id: 203
      topology {
        asic_connections {
          dst_asic_id: 202
          eth_connections { src_chan: 0 dst_chan: 0 is_local: true }
          eth_connections { src_chan: 1 dst_chan: 1 is_local: true }
        }
        asic_connections {
          dst_asic_id: 207
          eth_connections { src_chan: 2 dst_chan: 2 is_local: true }
          eth_connections { src_chan: 3 dst_chan: 3 is_local: true }
        }
      }
    }
    asic_topologies {
      asic_id: 204
      topology {
        asic_connections {
          dst_asic_id: 200
          eth_connections { src_chan: 0 dst_chan: 0 is_local: true }
          eth_connections { src_chan: 1 dst_chan: 1 is_local: true }
        }
        asic_connections {
          dst_asic_id: 205
          eth_connections { src_chan: 2 dst_chan: 2 is_local: true }
          eth_connections { src_chan: 3 dst_chan: 3 is_local: true }
        }
      }
    }
    asic_topologies {
      asic_id: 205
      topology {
        asic_connections {
          dst_asic_id: 201
          eth_connections { src_chan: 0 dst_chan: 0 is_local: true }
          eth_connections { src_chan: 1 dst_chan: 1 is_local: true }
        }
        asic_connections {
          dst_asic_id: 204
          eth_connections { src_chan: 2 dst_chan: 2 is_local: true }
          eth_connections { src_chan: 3 dst_chan: 3 is_local: true }
        }
        asic_connections {
          dst_asic_id: 206
          eth_connections { src_chan: 4 dst_chan: 4 is_local: true }
          eth_connections { src_chan: 5 dst_chan: 5 is_local: true }
        }
      }
    }
    asic_topologies {
      asic_id: 206
      topology {
        asic_connections {
          dst_asic_id: 202
          eth_connections { src_chan: 0 dst_chan: 0 is_local: true }
          eth_connections { src_chan: 1 dst_chan: 1 is_local: true }
        }
        asic_connections {
          dst_asic_id: 205
          eth_connections { src_chan: 2 dst_chan: 2 is_local: true }
          eth_connections { src_chan: 3 dst_chan: 3 is_local: true }
        }
        asic_connections {
          dst_asic_id: 207
          eth_connections { src_chan: 4 dst_chan: 4 is_local: true }
          eth_connections { src_chan: 5 dst_chan: 5 is_local: true }
        }
      }
    }
    asic_topologies {
      asic_id: 207
      topology {
        asic_connections {
          dst_asic_id: 203
          eth_connections { src_chan: 0 dst_chan: 0 is_local: true }
          eth_connections { src_chan: 1 dst_chan: 1 is_local: true }
        }
        asic_connections {
          dst_asic_id: 206
          eth_connections { src_chan: 2 dst_chan: 2 is_local: true }
          eth_connections { src_chan: 3 dst_chan: 3 is_local: true }
        }
      }
    }
  }
  # Host connectivity (cross-host connections)
  host_connectivity_graph {
    src_host_name: "host0"
    host_connections {
      dst_host_name: "host1"
      # Only 2 channels between host0 and host1 (insufficient for STRICT requiring 8)
      # ASIC 100 -> ASIC 200 (2 channels)
      exit_node_connections {
        src_exit_node: 100
        dst_exit_node: 200
        eth_conn {
          src_chan: 4
          dst_chan: 4
          is_local: false
        }
      }
      exit_node_connections {
        src_exit_node: 100
        dst_exit_node: 200
        eth_conn {
          src_chan: 5
          dst_chan: 5
          is_local: false
        }
      }
    }
  }
  host_connectivity_graph {
    src_host_name: "host1"
    host_connections {
      dst_host_name: "host0"
      # ASIC 200 -> ASIC 100 (2 channels)
      exit_node_connections {
        src_exit_node: 200
        dst_exit_node: 100
        eth_conn {
          src_chan: 4
          dst_chan: 4
          is_local: false
        }
      }
      exit_node_connections {
        src_exit_node: 200
        dst_exit_node: 100
        eth_conn {
          src_chan: 5
          dst_chan: 5
          is_local: false
        }
      }
    }
  }
}
# ASIC descriptors for Mesh 0
asic_descriptors {
  asic_id: 100
  asic_descriptor {
    tray_id: 0
    asic_location: 0
    board_type: 1
    unique_id: 100
    host_name: "host0"
  }
}
asic_descriptors {
  asic_id: 101
  asic_descriptor {
    tray_id: 0
    asic_location: 1
    board_type: 1
    unique_id: 101
    host_name: "host0"
  }
}
asic_descriptors {
  asic_id: 102
  asic_descriptor {
    tray_id: 0
    asic_location: 2
    board_type: 1
    unique_id: 102
    host_name: "host0"
  }
}
asic_descriptors {
  asic_id: 103
  asic_descriptor {
    tray_id: 0
    asic_location: 3
    board_type: 1
    unique_id: 103
    host_name: "host0"
  }
}
asic_descriptors {
  asic_id: 104
  asic_descriptor {
    tray_id: 0
    asic_location: 4
    board_type: 1
    unique_id: 104
    host_name: "host0"
  }
}
asic_descriptors {
  asic_id: 105
  asic_descriptor {
    tray_id: 0
    asic_location: 5
    board_type: 1
    unique_id: 105
    host_name: "host0"
  }
}
asic_descriptors {
  asic_id: 106
  asic_descriptor {
    tray_id: 0
    asic_location: 6
    board_type: 1
    unique_id: 106
    host_name: "host0"
  }
}
asic_descriptors {
  asic_id: 107
  asic_descriptor {
    tray_id: 0
    asic_location: 7
    board_type: 1
    unique_id: 107
    host_name: "host0"
  }
}
# ASIC descriptors for Mesh 1 (on host1)
asic_descriptors {
  asic_id: 200
  asic_descriptor {
    tray_id: 0
    asic_location: 0
    board_type: 1
    unique_id: 200
    host_name: "host1"
  }
}
asic_descriptors {
  asic_id: 201
  asic_descriptor {
    tray_id: 0
    asic_location: 1
    board_type: 1
    unique_id: 201
    host_name: "host1"
  }
}
asic_descriptors {
  asic_id: 202
  asic_descriptor {
    tray_id: 0
    asic_location: 2
    board_type: 1
    unique_id: 202
    host_name: "host1"
  }
}
asic_descriptors {
  asic_id: 203
  asic_descriptor {
    tray_id: 0
    asic_location: 3
    board_type: 1
    unique_id: 203
    host_name: "host1"
  }
}
asic_descriptors {
  asic_id: 204
  asic_descriptor {
    tray_id: 0
    asic_location: 4
    board_type: 1
    unique_id: 204
    host_name: "host1"
  }
}
asic_descriptors {
  asic_id: 205
  asic_descriptor {
    tray_id: 0
    asic_location: 5
    board_type: 1
    unique_id: 205
    host_name: "host1"
  }
}
asic_descriptors {
  asic_id: 206
  asic_descriptor {
    tray_id: 0
    asic_location: 6
    board_type: 1
    unique_id: 206
    host_name: "host1"
  }
}
asic_descriptors {
  asic_id: 207
  asic_descriptor {
    tray_id: 0
    asic_location: 7
    board_type: 1
    unique_id: 207
    host_name: "host1"
  }
}
host_to_rank {
  host_name: "host0"
  rank: 0
}
host_to_rank {
  host_name: "host1"
  rank: 1
}
# Exit node connection tables
exit_node_connection_table {
  host_name: "host0"
  exit_connections {
    src_exit_node: 100
    dst_exit_node: 200
    eth_conn {
      src_chan: 4
      dst_chan: 4
      is_local: false
    }
  }
  exit_connections {
    src_exit_node: 100
    dst_exit_node: 200
    eth_conn {
      src_chan: 5
      dst_chan: 5
      is_local: false
    }
  }
}
exit_node_connection_table {
  host_name: "host1"
  exit_connections {
    src_exit_node: 200
    dst_exit_node: 100
    eth_conn {
      src_chan: 4
      dst_chan: 4
      is_local: false
    }
  }
  exit_connections {
    src_exit_node: 200
    dst_exit_node: 100
    eth_conn {
      src_chan: 5
      dst_chan: 5
      is_local: false
    }
  }
}
ethernet_firmware_version {
  major: 1
  minor: 0
  patch: 0
}
