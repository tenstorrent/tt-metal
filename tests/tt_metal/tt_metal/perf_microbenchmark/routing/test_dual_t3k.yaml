# SPDX-FileCopyrightText: Â© 2025 Tenstorrent Inc.
#
# SPDX-License-Identifier: Apache-2.0
Tests:
  # ======================================================================================
  # Test 1: A simple, fully specified unicast test for multi-host.
  # This demonstrates the most basic configuration using ChipIds.
  # Fabric must be 2D Dynamic.
  # ======================================================================================
  - name: UnicastWithChipId
    fabric_setup:
      topology: Mesh
      routing_type: Dynamic
    defaults:
      ftype: unicast
      ntype: unicast_write
      size: 1024
      num_packets: 10
    senders:
      - device: [0, 0]
        patterns:
          - destination:
              device: [0, 1]
          - destination:
              device: [1, 0]
          - destination:
              device: [1, 1]
      - device: [0, 1]
        patterns:
          - destination:
              device: [0, 0]
          - destination:
              device: [1, 0]
          - destination:
              device: [1, 1]
      - device: [0, 2]
        patterns:
          - destination:
              device: [1, 0]
          - destination:
              device: [1, 1]
          - destination:
              device: [1, 2]
          - destination:
              device: [1, 3]
      - device: [0, 3]
        patterns:
          - destination:
              device: [1, 0]
          - destination:
              device: [1, 1]
          - destination:
              device: [1, 2]
          - destination:
              device: [1, 3]
      - device: [0, 4]
        patterns:
          - destination:
              device: [1, 4]
          - destination:
              device: [1, 5]
          - destination:
              device: [1, 6]
          - destination:
              device: [1, 7]
      - device: [0, 5]
        patterns:
          - destination:
              device: [1, 4]
          - destination:
              device: [1, 5]
          - destination:
              device: [1, 6]
          - destination:
              device: [1, 7]
      - device: [0, 6]
        patterns:
          - destination:
              device: [1, 4]
          - destination:
              device: [1, 5]
          - destination:
              device: [1, 6]
          - destination:
              device: [1, 7]
      - device: [0, 7]
        patterns:
          - destination:
              device: [1, 4]
          - destination:
              device: [1, 5]
          - destination:
              device: [1, 6]
          - destination:
              device: [1, 7]
      - device: [1, 0]
        patterns:
          - destination:
              device: [0, 0]
          - destination:
              device: [0, 1]
          - destination:
              device: [0, 2]
          - destination:
              device: [0, 3]
          - destination:
              device: [1, 1]
      - device: [1, 1]
        patterns:
          - destination:
              device: [0, 0]
          - destination:
              device: [0, 1]
          - destination:
              device: [0, 2]
          - destination:
              device: [0, 3]
          - destination:
              device: [1, 0]
      - device: [1, 2]
        patterns:
          - destination:
              device: [0, 2]
          - destination:
              device: [0, 3]
          - destination:
              device: [1, 3]
      - device: [1, 3]
        patterns:
          - destination:
              device: [0, 2]
          - destination:
              device: [0, 3]
          - destination:
              device: [1, 2]
      - device: [1, 4]
        patterns:
          - destination:
              device: [0, 4]
          - destination:
              device: [0, 5]
          - destination:
              device: [0, 6]
          - destination:
              device: [0, 7]
          - destination:
              device: [1, 5]
      - device: [1, 5]
        patterns:
          - destination:
              device: [0, 4]
          - destination:
              device: [0, 5]
          - destination:
              device: [0, 6]
          - destination:
              device: [0, 7]
          - destination:
              device: [1, 4]
      - device: [1, 6]
        patterns:
          - destination:
              device: [0, 4]
          - destination:
              device: [0, 5]
          - destination:
              device: [0, 6]
          - destination:
              device: [0, 7]
          - destination:
              device: [1, 7]
      - device: [1, 7]
        patterns:
          - destination:
              device: [0, 4]
          - destination:
              device: [0, 5]
          - destination:
              device: [0, 6]
          - destination:
              device: [0, 7]
          - destination:
              device: [1, 6]
  # ======================================================================================
  # Test 2: A simple, fully specified unicast test for mult-host.
  # This demonstrates the most basic configuration using MeshCoordinates.
  # Fabric must be 2D Dynamic.
  # ======================================================================================
  - name: UnicastWithMeshCoordinates
    fabric_setup:
      topology: Mesh
      routing_type: Dynamic
    defaults:
      ftype: unicast
      ntype: unicast_write
      size: 1024
      num_packets: 10
    senders:
      - device: [0, [0, 0]]
        patterns:
          - destination:
              device: [1, [0, 1]]
      - device: [0, [0, 1]]
        patterns:
          - destination:
              device: [1, [0, 0]]
      - device: [0, [1, 0]]
        patterns:
          - destination:
              device: [1, [1, 0]]
      - device: [0, [1, 1]]
        patterns:
          - destination:
              device: [1, [1, 1]]
      - device: [0, [0, 2]]
        patterns:
          - destination:
              device: [1, [0, 3]]
      - device: [0, [0, 3]]
        patterns:
          - destination:
              device: [1, [0, 2]]
      - device: [0, [1, 2]]
        patterns:
          - destination:
              device: [1, [1, 2]]
      - device: [0, [1, 3]]
        patterns:
          - destination:
              device: [1, [1, 3]]
  # ======================================================================================
  # Test 3: Parameterized Unicast Test
  # See Test 2 in test_features.yaml for a more detailed explanation on paramtrization
  # ======================================================================================
  - name: UnicastAlltoAll
    fabric_setup:
      topology: Mesh
      routing_type: Dynamic
    parametrization_params:
      size: [512, 1024, 2048]
      num_packets: [50, 100]
      ntype: [unicast_write, atomic_inc]
    defaults:
      ftype: unicast
    patterns:
      - type: all_to_all
        iterations: 20
  # ======================================================================================
  # Test 4: Parameterized Unicast Test
  # ======================================================================================
  - name: UnicastRandomPairing
    fabric_setup:
      topology: Mesh
      routing_type: Dynamic
    defaults:
      ftype: unicast
      ntype: unicast_write
      size: 2048
      num_packets: 10
    patterns:
      - type: full_device_random_pairing
        iterations: 1
