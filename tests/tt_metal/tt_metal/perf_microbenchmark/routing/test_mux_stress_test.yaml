allocation_policies:
    receiver:
      max_configs_per_core: 4


Tests:


  - name: "mux_stress_test_large"
    enable_flow_control: true  # Enable flow control (mux) for this test
    sync: true
    fabric_setup:
      topology: Mesh
      routing_type: LowLatency

    defaults:
      ftype: unicast
      ntype: unicast_write
      size: 2048
      num_packets: 100000  # Large stress test

    patterns:
      - type: all_to_all

  - name: "mux_stress_test_small"
    enable_flow_control: true  # Enable flow control (mux) for this test
    sync: true
    fabric_setup:
      topology: Mesh
      routing_type: LowLatency

    defaults:
      ftype: unicast
      ntype: unicast_write
      size: 2048
      num_packets: 1000000  # Can now handle much higher packet counts with mux flow control

    patterns:
      - type: all_to_all
