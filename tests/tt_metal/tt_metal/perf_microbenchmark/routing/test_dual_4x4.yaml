# SPDX-FileCopyrightText: Â© 2025 Tenstorrent AI ULC
#
# SPDX-License-Identifier: Apache-2.0
# Run this with the following command:
# tt-run --rank-binding tests/tt_metal/distributed/config/dual_4x4_rank_bindings.yaml --mpi-args "--allow-run-as-root" ./build/test/tt_metal/perf_microbenchmark/routing/test_tt_fabric --test_config tests/tt_metal/tt_metal/perf_microbenchmark/routing/test_dual_4x4.yaml
Tests:
  # ======================================================================================
  # Test 1: Inter-Mesh Directed Traffic
  # ======================================================================================
  - name: InterMeshCrossTraffic
    fabric_setup:
      topology: Mesh
      routing_type: Dynamic
    defaults:
      ftype: unicast
      ntype: unicast_write
      size: 2048
      num_packets: 250
    senders:
      - device: [0, [2, 3]]
        patterns:
          - destination:
              device: [1, [0, 0]]
      - device: [1, [0, 1]]
        patterns:
          - destination:
              device: [0, [3, 3]]

  - name: InterMeshCrossTrafficCyclic
    fabric_setup:
      topology: Mesh
      routing_type: Dynamic
    defaults:
      ftype: unicast
      ntype: unicast_write
      size: 2048
      num_packets: 250
    senders:
      - device: [0, 14]
        patterns:
          - destination:
              device: [1, 2]
      - device: [1, 1]
        patterns:
          - destination:
              device: [0, 13]
      - device: [1, 3]
        patterns:
          - destination:
              device: [1, 0]
      - device: [0, 12]
        patterns:
          - destination:
              device: [0, 15]
