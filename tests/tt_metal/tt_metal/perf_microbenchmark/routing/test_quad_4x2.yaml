# SPDX-FileCopyrightText: Â© 2025 Tenstorrent AI ULC
#
# SPDX-License-Identifier: Apache-2.0
# Run this with the following command:
# tt-run --rank-binding tests/tt_metal/distributed/config/galaxy_2x4_rank_bindings.yaml --mpi-args "--allow-run-as-root --tag-output" ./build/test/tt_metal/perf_microbenchmark/routing/test_tt_fabric --test_config tests/tt_metal/tt_metal/perf_microbenchmark/routing/test_quad_4x2.yaml
Tests:
  # ======================================================================================
  # Test 1: Inter-Mesh Directed Traffic
  # ======================================================================================
  # - name: InterMeshCrossTraffic
  #   sync: true
  #   enable_flow_control: true
  #   fabric_setup:
  #     topology: Mesh
  #   defaults:
  #     ftype: unicast
  #     ntype: unicast_write
  #     size: 4096
  #     num_packets: 50000
  #   senders:
  #     - device: [0, 14]
  #       patterns:
  #         - destination:
  #             device: [1, 12]
  #     - device: [1, 15]
  #       patterns:
  #         - destination:
  #             device: [0, 13]

  - name: "FlowControlMultiMesh"
    sync: true
    enable_flow_control: true
    fabric_setup:
      topology: Mesh

    defaults:
      ftype: unicast
      ntype: unicast_write
      size: 4096
      num_packets: 50000

    patterns:
      - type: all_to_all
