allocation_policies:
    receiver:
      max_configs_per_core: 1

Tests:
# # ================================================
# # 1D Ring (low latency)
# # ================================================
#   - name: "LinearMcastEast"
#     sync: true

#     fabric_setup:
#       topology: Ring

#     defaults:
#       ftype: mcast
#       ntype: unicast_write
#       size: 512
#       num_packets: 5000
#       destination:
#         hops:
#           E: 3

#     patterns:
#       - type: all_devices_uniform_pattern
#         iterations: 5

#   - name: "LinearMcastWest"
#     sync: true

#     fabric_setup:
#       topology: Ring

#     defaults:
#       ftype: mcast
#       ntype: unicast_write
#       size: 512
#       num_packets: 5000
#       destination:
#         hops:
#           W: 3

#     patterns:
#       - type: all_devices_uniform_pattern
#         iterations: 5

#   - name: "LinearMcastNorth"
#     sync: true

#     fabric_setup:
#       topology: Ring

#     defaults:
#       ftype: mcast
#       ntype: unicast_write
#       size: 512
#       num_packets: 5000
#       destination:
#         hops:
#           N: 7

#     patterns:
#       - type: all_devices_uniform_pattern
#         iterations: 5

#   - name: "LinearMcastSouth"
#     sync: true

#     fabric_setup:
#       topology: Ring

#     defaults:
#       ftype: mcast
#       ntype: unicast_write
#       size: 512
#       num_packets: 5000
#       destination:
#         hops:
#           S: 7

#     patterns:
#       - type: all_devices_uniform_pattern
#         iterations: 5

# ================================================
# 2D (low latency) - remove (only for debug)
# ================================================
  - name: "2DLowLatencyMcastEast"

    fabric_setup:
      topology: Mesh
      routing_type: "LowLatency"

    defaults:
      ftype: unicast
      ntype: unicast_write
      size: 512
      num_packets: 100

    patterns:
      - type: all_to_all
        iterations: 1


# ================================================
# 2D (low latency) - remove (only for debug)
# ================================================
  - name: "2DTorusDebug"

    fabric_setup:
      topology: Torus
      torus_config: "XY"
      routing_type: "LowLatency"

    senders:
      - device: [0, 1]
        patterns:
          - ftype: unicast
            ntype: unicast_write
            size: 512
            num_packets: 100
            destination:
              device: [0, 2]

  - name: "2DTorusDebugMcast"

    fabric_setup:
      topology: Torus
      torus_config: "XY"
      routing_type: "LowLatency"

    senders:
      - device: [0, 1]
        patterns:
          - ftype: mcast
            ntype: unicast_write
            size: 512
            num_packets: 100
            destination:
              hops:
                S: 1
                E: 1

# ================================================
# 2D Torus (low latency)
# ================================================
  # - name: "TorusXYLowLatencyMcastEast"
  #   #sync: true

  #   fabric_setup:
  #     topology: Torus
  #     torus_config: "XY"
  #     routing_type: "LowLatency"

  #   defaults:
  #     ftype: mcast
  #     ntype: unicast_write
  #     size: 512
  #     num_packets: 5000
  #     destination:
  #       hops:
  #         E: 3

  #   patterns:
  #     - type: all_devices_uniform_pattern
  #       iterations: 5

  # - name: "TorusXYLowLatencyMcastWest"
  #   #sync: true

  #   fabric_setup:
  #     topology: Torus
  #     torus_config: "XY"
  #     routing_type: "LowLatency"

  #   defaults:
  #     ftype: mcast
  #     ntype: unicast_write
  #     size: 512
  #     num_packets: 5000
  #     destination:
  #       hops:
  #         W: 3

  #   patterns:
  #     - type: all_devices_uniform_pattern
  #       iterations: 5

  # - name: "TorusXYLowLatencyMcastNorth"
  #   #sync: true

  #   fabric_setup:
  #     topology: Torus
  #     torus_config: "XY"
  #     routing_type: "LowLatency"

  #   defaults:
  #     ftype: mcast
  #     ntype: unicast_write
  #     size: 512
  #     num_packets: 5000
  #     destination:
  #       hops:
  #         N: 7

  #   patterns:
  #     - type: all_devices_uniform_pattern
  #       iterations: 5

  # - name: "TorusXYLowLatencyMcastSouth"
  #   #sync: true

  #   fabric_setup:
  #     topology: Torus
  #     torus_config: "XY"
  #     routing_type: "LowLatency"

  #   defaults:
  #     ftype: mcast
  #     ntype: unicast_write
  #     size: 512
  #     num_packets: 5000
  #     destination:
  #       hops:
  #         S: 7

  #   patterns:
  #     - type: all_devices_uniform_pattern
  #       iterations: 5

  # - name: "TorusXYLowLatencyMcastNorthEast"
  #   #sync: true

  #   fabric_setup:
  #     topology: Torus
  #     torus_config: "XY"
  #     routing_type: "LowLatency"

  #   defaults:
  #     ftype: mcast
  #     ntype: unicast_write
  #     size: 512
  #     num_packets: 5000
  #     destination:
  #       hops:
  #         N: 7
  #         E: 2

  #   patterns:
  #     - type: all_devices_uniform_pattern
  #       iterations: 5
