allocation_policies:
    receiver:
      max_configs_per_core: 4

Tests:
  - name: "LinearMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Linear

    parametrization_params:
      num_links: [1, 2, 3, 4]
      ntype: [unicast_write, fused_atomic_inc, unicast_scatter_write]
      size: [2048, 4096]

    defaults:
      ftype: mcast
      num_packets: 20000

    patterns:
      - type: all_to_all
        iterations: 3

  - name: "UnidirLinearMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Linear

    parametrization_params:
      num_links: [1, 2, 3, 4]
      ntype: [unicast_write, fused_atomic_inc, unicast_scatter_write]
      size: [2048, 4096]

    defaults:
      ftype: mcast
      num_packets: 20000

    patterns:
      - type: unidirectional_linear
        iterations: 3

  - name: "SingleSenderLinearUnicastAllDevices"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Linear

    parametrization_params:
      num_links: [1, 2, 3, 4]
      ntype: [unicast_write, fused_atomic_inc, unicast_scatter_write]
      size: [2048, 4096]

    defaults:
      ftype: unicast
      num_packets: 20000

    patterns:
      - type: one_to_all
        iterations: 3

  # Full Ring Multicast and Unicast tests have more variation in bandwidth, so we split them up and run some for extra iterations
  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 1

    defaults:
      ftype: mcast
      ntype: unicast_write
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 30

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 1

    defaults:
      ftype: mcast
      ntype: unicast_write
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 30

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 1

    defaults:
      ftype: mcast
      ntype: fused_atomic_inc
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 30

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 1

    defaults:
      ftype: mcast
      ntype: fused_atomic_inc
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 30

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 1

    defaults:
      ftype: mcast
      ntype: unicast_scatter_write
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 30

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 1

    defaults:
      ftype: mcast
      ntype: unicast_scatter_write
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 30

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 2

    defaults:
      ftype: mcast
      ntype: unicast_write
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 2

    defaults:
      ftype: mcast
      ntype: unicast_write
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 2

    defaults:
      ftype: mcast
      ntype: fused_atomic_inc
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 2

    defaults:
      ftype: mcast
      ntype: fused_atomic_inc
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 2

    defaults:
      ftype: mcast
      ntype: unicast_scatter_write
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 2

    defaults:
      ftype: mcast
      ntype: unicast_scatter_write
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 3

    defaults:
      ftype: mcast
      ntype: unicast_write
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 30

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 3

    defaults:
      ftype: mcast
      ntype: unicast_write
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 3

    defaults:
      ftype: mcast
      ntype: fused_atomic_inc
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 3

    defaults:
      ftype: mcast
      ntype: fused_atomic_inc
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 3

    defaults:
      ftype: mcast
      ntype: unicast_scatter_write
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 30

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 3

    defaults:
      ftype: mcast
      ntype: unicast_scatter_write
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 4

    defaults:
      ftype: mcast
      ntype: unicast_write
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 30

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 4

    defaults:
      ftype: mcast
      ntype: unicast_write
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 4

    defaults:
      ftype: mcast
      ntype: fused_atomic_inc
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 4

    defaults:
      ftype: mcast
      ntype: fused_atomic_inc
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 4

    defaults:
      ftype: mcast
      ntype: unicast_scatter_write
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 30

  - name: "FullRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 4

    defaults:
      ftype: mcast
      ntype: unicast_scatter_write
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 1

    defaults:
      ftype: unicast
      ntype: unicast_write
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 30

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 1

    defaults:
      ftype: unicast
      ntype: unicast_write
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 30

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 1

    defaults:
      ftype: unicast
      ntype: fused_atomic_inc
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 1

    defaults:
      ftype: unicast
      ntype: fused_atomic_inc
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 30

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 1

    defaults:
      ftype: unicast
      ntype: unicast_scatter_write
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 1

    defaults:
      ftype: unicast
      ntype: unicast_scatter_write
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 30

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 2

    defaults:
      ftype: unicast
      ntype: unicast_write
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 2

    defaults:
      ftype: unicast
      ntype: unicast_write
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 2

    defaults:
      ftype: unicast
      ntype: fused_atomic_inc
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 2

    defaults:
      ftype: unicast
      ntype: fused_atomic_inc
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 2

    defaults:
      ftype: unicast
      ntype: unicast_scatter_write
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 2

    defaults:
      ftype: unicast
      ntype: unicast_scatter_write
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 3

    defaults:
      ftype: unicast
      ntype: unicast_write
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 3

    defaults:
      ftype: unicast
      ntype: unicast_write
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 3

    defaults:
      ftype: unicast
      ntype: fused_atomic_inc
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 3

    defaults:
      ftype: unicast
      ntype: fused_atomic_inc
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 3

    defaults:
      ftype: unicast
      ntype: unicast_scatter_write
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 3

    defaults:
      ftype: unicast
      ntype: unicast_scatter_write
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 4

    defaults:
      ftype: unicast
      ntype: unicast_write
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 4

    defaults:
      ftype: unicast
      ntype: unicast_write
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 4

    defaults:
      ftype: unicast
      ntype: fused_atomic_inc
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 4

    defaults:
      ftype: unicast
      ntype: fused_atomic_inc
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 4

    defaults:
      ftype: unicast
      ntype: unicast_scatter_write
      size: 2048
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "FullRingUnicast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring
      num_links: 4

    defaults:
      ftype: unicast
      ntype: unicast_scatter_write
      size: 4096
      num_packets: 20000

    patterns:
      - type: full_ring
        iterations: 3

  - name: "HalfRingMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Ring

    parametrization_params:
      num_links: [1, 2, 3, 4]
      ntype: [unicast_write, fused_atomic_inc, unicast_scatter_write]
      size: [2048, 4096]

    defaults:
      ftype: mcast
      num_packets: 20000

    patterns:
      - type: half_ring
        iterations: 3

  - name: "MeshMulticast"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Mesh

    parametrization_params:
      num_links: [1, 2, 3, 4]
      ntype: [unicast_write, fused_atomic_inc, unicast_scatter_write]
      size: [2048, 4096]

    defaults:
      ftype: mcast
      num_packets: 20000

    patterns:
      - type: all_to_all
        iterations: 3

  - name: "MeshMulticastDynamic"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Mesh
      routing_type: Dynamic

    parametrization_params:
      num_links: [1, 2, 3, 4]
      ntype: [unicast_write, fused_atomic_inc, unicast_scatter_write]
      size: [2048, 4096]

    defaults:
      ftype: mcast
      ntype: unicast_write
      num_packets: 20000

    patterns:
      - type: all_to_all
        iterations: 3

  - name: "SingleSenderMeshUnicastAllDevices"
    benchmark_mode: true
    sync: true
    fabric_setup:
      topology: Mesh

    parametrization_params:
      num_links: [1, 2, 3, 4]
      ntype: [unicast_write, fused_atomic_inc, unicast_scatter_write]
      size: [2048, 4096]

    defaults:
      ftype: unicast
      num_packets: 20000

    patterns:
      - type: one_to_all
        iterations: 3
